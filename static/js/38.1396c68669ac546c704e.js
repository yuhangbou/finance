webpackJsonp([38],{CoWG:function(e,t){},R34Y:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("4YfN"),o=a.n(n),s={name:"xianjinliuliangbiao",mixins:[a("IfhF").a],data:function(){return{subjectsNumber:"",subjectsName:"",id:"",add:{beginningBalance:"",borrow:"",loans:"",yearBalance:""},dialogVisible1:!1,title:"",form:{beginningBalance:"",borrow:"",loans:"",yearBalance:""},dialogFormVisible:!1,type:"",msg:"",dialogVisible:!1,tableData:[],total:0,dangqianye:1,pageSize:10,rules:{beginningBalance:[{required:!0,message:"请输入期初余额",trigger:"blur"},{type:"number",message:"必须为数字值"}],loans:[{required:!0,message:"请输入贷方累计",trigger:"blur"},{type:"number",message:"必须为数字值"}],borrow:[{required:!0,message:"请输入借方累计",trigger:"blur"},{type:"number",message:"必须为数字值"}]}}},mounted:function(){this.getStorage(),this.list()},watch:{form:{handler:function(e,t){isNaN(Number(this.form.beginningBalance))||isNaN(Number(this.form.loans))||isNaN(Number(this.form.borrow))?this.form.yearBalance="":this.form.yearBalance=Number(this.form.beginningBalance)+Number(this.form.loans)-Number(this.form.borrow)},deep:!0},add:{handler:function(e,t){isNaN(Number(this.add.beginningBalance))||isNaN(Number(this.add.loans))||isNaN(Number(this.add.borrow))?this.add.yearBalance="":this.add.yearBalance=Number(this.add.beginningBalance)+Number(this.add.loans)-Number(this.add.borrow)},deep:!0}},methods:{add_data:function(e){this.subjectsNumber=e.subjects_number,e.subjecsName?this.subjectsName=e.subjectsName:this.subjectsName=e.subjects_name,this.add={beginningBalance:"",borrow:"",loans:"",yearBalance:""},null==e.subjectId?this.id=e.id_num:this.id=e.subjectId,this.dialogVisible1=!0},add_cancel:function(){this.$refs.add.resetFields(),this.dialogVisible1=!1},add_ok:function(){var e=this;this.add.yearBalance<0?this._message(2,"年初余额不能小于0"):this.$refs.add.validate(function(t){if(!t)return console.log("error submit!!"),!1;e._ajax("userHomePage/addStartSubject",o()({workAccountId:e.accountId,uuid:e.uuid},e.add,{subjectId:e.id,subjectsNumber:e.subjectsNumber,subjectsName:e.subjectsName}),function(t){e._message(1,"添加数据成功"),e.dialogVisible1=!1,e.list()})})},xiugai:function(e){null==e.subjectId?this.id=e.id_num:this.id=e.subjectId,e.subjects_number?this.title=e.subjects_number.toString():this.title=e.subjectsNumber.toString(),e.beginning_balance?this.form.beginningBalance=Number(e.beginning_balance):this.form.beginningBalance=Number(e.beginningBalance),e.loans?this.form.loans=Number(e.loans):this.form.loans=Number(e.loans1),e.borrow?this.form.borrow=Number(e.borrow):this.form.borrow=Number(e.borrow1),e.year_balance?this.form.yearBalance=Number(e.year_balance):this.form.yearBalance=Number(e.yearBalance),this.dialogFormVisible=!0},ok:function(){var e=this;this.form.yearBalance<0?this._message(2,"年初余额不能小于0"):this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.tableData.findIndex(function(t){return t.subjects_number==e.title});e._ajax("userHomePage/updateStartSubject",o()({workAccountId:e.accountId,uuid:e.uuid},e.form,{subjectId:e.id}),function(t){e._message(1,"修改成功"),e.dialogVisible1=!1,e.list()}),e.dialogFormVisible=!1})},ok_cancel:function(){this.$refs.form.resetFields(),this.dialogFormVisible=!1},balance:function(){var e=this;this._ajax("userHomePage/selectUserType",{workAccountId:this.accountId,uuid:this.uuid},function(t){0==t.type&&(e.msg="资产总和大于负债+权益"),1==t.type&&(e.msg="资产总和小于负债+权益"),2==t.type&&(e.msg="恭喜资产试算平衡"),e.dialogVisible=!0})},a:function(){this.type=0,this.dangqianye=1,this.list()},b:function(){this.type=1,this.dangqianye=1,this.list()},c:function(){this.type=2,this.dangqianye=1,this.list()},d:function(){this.type=3,this.dangqianye=1,this.list()},e:function(){this.type=4,this.dangqianye=1,this.list()},list:function(){var e=this;this._ajax("userHomePage/selectStartSubjectList",{uuid:this.uuid,workAccountId:this.accountId,pageSize:this.pageSize,page:this.dangqianye,type:this.type},function(t){e.tableData=t.PageInfo.list,e.total=t.PageInfo.total})},tableRowClassName:function(e){e.row;return e.rowIndex%2!=0?"lan":""},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.list()},handleCurrentChange:function(e){console.log("当前页: "+e),this.dangqianye=e,this.list()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{background:"#FFF",padding:"2vh 2vw"}},[a("div",{staticStyle:{"font-size":"30px",color:"#1C2023","text-align":"center"}},[e._v("\n            期初设置\n        ")]),e._v(" "),a("div",{staticStyle:{border:"1px solid #F8F8FF",padding:"2vh 2vw","margin-top":"2vh"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"flex-start"}},[a("div",{staticStyle:{display:"flex"}},[a("el-button",{attrs:{type:"info"},on:{click:e.a}},[e._v("资产")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.b}},[e._v("负债")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.c}},[e._v("权益")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.d}},[e._v("成本")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.e}},[e._v("损益")])],1),e._v(" "),a("div",{staticStyle:{display:"flex","align-items":"flex-start"}},[a("el-button",{attrs:{type:""},on:{click:function(t){return e.exportFunc("excel","期初报表")}}},[e._v("导出")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"1vw"},attrs:{type:""},on:{click:e.balance}},[e._v("试算平衡")])],1)]),e._v(" "),a("div",{attrs:{id:"excel"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"",label:"科目编码",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.subjects_number?a("span",[e._v(e._s(t.row.subjects_number))]):a("span",[e._v(e._s(t.row.subjectsNumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"科目名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.subjectsName?a("span",[e._v(e._s(t.row.subjectsName))]):a("span",[e._v(e._s(t.row.subjects_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"方向"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.flag||0==t.row.direction?a("span",[e._v("借")]):e._e(),e._v(" "),1==t.row.flag||1==t.row.direction?a("span",[e._v("贷")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"期初余额",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.beginning_balance?a("span",[e._v(e._s(t.row.beginning_balance))]):a("span",[e._v(e._s(t.row.beginningBalance))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"借方累计",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.borrow?a("span",[e._v(e._s(t.row.borrow))]):a("span",[e._v(e._s(t.row.borrow1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"贷方累计"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.loans?a("span",[e._v(e._s(t.row.loans))]):a("span",[e._v(e._s(t.row.loans1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"年初余额"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.year_balance?a("span",[e._v(e._s(t.row.year_balance))]):a("span",[e._v(e._s(t.row.yearBalance))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.year_balance&&!t.row.yearBalance,expression:"!scope.row.year_balance && !scope.row.yearBalance"}],attrs:{type:"text",size:"small"},on:{click:function(a){return e.add_data(t.row)}}},[e._v("添加数据")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.year_balance||t.row.yearBalance,expression:"scope.row.year_balance || scope.row.yearBalance"}],attrs:{type:"text",size:"small"},on:{click:function(a){return e.xiugai(t.row)}}},[e._v("修改")])]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"1vh"}},[a("el-pagination",{attrs:{"current-page":e.dangqianye,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])]),e._v(" "),a("el-dialog",{attrs:{title:"试算平衡",visible:e.dialogVisible,width:"20%","show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[e._v("\n            "+e._s(e.msg)+"\n        ")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"20%","show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"期初余额","label-width":"100px",prop:"beginningBalance"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.beginningBalance,callback:function(t){e.$set(e.form,"beginningBalance",e._n(t))},expression:"form.beginningBalance"}})],1),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[e._v("\n                    元\n                ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"贷方累计","label-width":"100px",prop:"loans"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.loans,callback:function(t){e.$set(e.form,"loans",e._n(t))},expression:"form.loans"}})],1),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[e._v("\n                    元\n                ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"借方累计","label-width":"100px",prop:"borrow"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.borrow,callback:function(t){e.$set(e.form,"borrow",e._n(t))},expression:"form.borrow"}})],1),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[e._v("\n                    元\n                ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"年初余额","label-width":"100px",prop:"yearBalance"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{disabled:"","auto-complete":"off"},model:{value:e.form.yearBalance,callback:function(t){e.$set(e.form,"yearBalance",t)},expression:"form.yearBalance"}})],1),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[e._v("\n                    元\n                ")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.ok_cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加数据",visible:e.dialogVisible1,width:"20%","show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible1=t}}},[a("el-form",{ref:"add",attrs:{model:e.add,rules:e.rules}},[a("el-form-item",{attrs:{label:"期初余额","label-width":"100px",prop:"beginningBalance"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.add.beginningBalance,callback:function(t){e.$set(e.add,"beginningBalance",e._n(t))},expression:"add.beginningBalance"}})],1),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[e._v("\n                    元\n                ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"贷方累计","label-width":"100px",prop:"loans"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.add.loans,callback:function(t){e.$set(e.add,"loans",e._n(t))},expression:"add.loans"}})],1),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[e._v("\n                    元\n                ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"借方累计","label-width":"100px",prop:"borrow"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.add.borrow,callback:function(t){e.$set(e.add,"borrow",e._n(t))},expression:"add.borrow"}})],1),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[e._v("\n                    元\n                ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"年初余额","label-width":"100px"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{disabled:"","auto-complete":"off"},model:{value:e.add.yearBalance,callback:function(t){e.$set(e.add,"yearBalance",t)},expression:"add.yearBalance"}})],1),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[e._v("\n                    元\n                ")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.add_cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.add_ok}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=a("C7Lr")(s,l,!1,function(e){a("CoWG")},null,null);t.default=i.exports}});
//# sourceMappingURL=38.1396c68669ac546c704e.js.map