webpackJsonp([24],{f0zo:function(e,t){},raK0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("4YfN"),o=r.n(s),a={name:"set-up",mounted:function(){new WxLogin({id:"div1",appid:"wx3b976ef54d06d852",scope:"snsapi_login",redirect_uri:"https%3a%2f%2fshujiecaishui.com%2f%2f%23%2fhome%2fsetUp%2fsetUp",state:"1",style:"",href:""}),new WxLogin({id:"div2",appid:"wx3b976ef54d06d852",scope:"snsapi_login",redirect_uri:"https%3a%2f%2fshujiecaishui.com%2f%2f%23%2fhome%2fsetUp%2fsetUp",state:"2",style:"",href:""})},data:function(){var e=this;return{code1:this.$route.query.code?this.$route.query.code:0,code2:this.$route.query.code?this.$route.query.code:0,c:!0,num:0,checked:"",time:"60 s",code:!0,activeName:"first",ruleForm:{passWord:"",userPassWord:"",confirmPassWord:""},Form:{userPassWord:"",userPhone:"",code:"",status:5},rules1:{passWord:[{required:!0,message:"请输入当前密码",trigger:"blur"}],userPassWord:[{required:!0,validator:function(t,r,s){""===r?s(new Error("请输入密码")):(""!==e.ruleForm.confirmPassWord&&e.$refs.ruleForm.validateField("confirmPassWord"),s())},trigger:"blur"}],confirmPassWord:[{required:!0,validator:function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.ruleForm.userPassWord?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]},rules2:{userPhone:[{required:!0,validator:function(e,t,r){t?/^1([38]\d|5[0-35-9]|7[3678])\d{8}$/.test(t)?r():r(new Error("请输入正确的手机号")):r(new Error("手机号不能为空"))},trigger:"change"}],userPassWord:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},watch:{$route:function(e,t){var r=this;this.$route.query.code&&1==this.$route.query.state&&this._ajax("weChatWeb/WeChatChangeVerification",{WeChatCode:this.$route.query.code,uuid:JSON.parse(localStorage.getItem("uuid"))},function(e){r.check=e.check,r.c=!1}),this.$route.query.code&&2==this.$route.query.state&&this._ajax("weChatWeb/WeChatChangeBinding",{WeChatCode:this.$route.query.code,check:this.check,uuid:JSON.parse(localStorage.getItem("uuid"))},function(e){r._message(1,"换绑成功")})}},methods:{get_code:function(){var e=this;new RegExp(/^1[3456789]\d{9}$/).test(this.Form.userPhone)?(this._ajax("common/sms",{phone:this.Form.userPhone,flag:1,status:5},function(t){e.code=!1;var r=setInterval(function(){e.time=parseInt(e.time)-1+" s",1==parseInt(e.time)&&(clearTimeout(r),e.code=!0)},1e3)}),this.time="60 s"):this._message(3,"请输入正确的手机号")},handleClick:function(e,t){},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t._ajax("userHomePage/updateUserPassWord",o()({},t.ruleForm,{uuid:JSON.parse(localStorage.getItem("uuid"))}),function(e){t._message(1,"修改成功")})})},submitForm1:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t._ajax("userHomePage/updateUserPhone",o()({},t.Form,{uuid:JSON.parse(localStorage.getItem("uuid"))}),function(e){t._message(1,"修改成功")})})},resetForm:function(e){this.$refs[e].resetFields()}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",height:"100%"}},[r("div",{staticStyle:{background:"#FFF",width:"1000px",height:"80%"}},[r("el-tabs",{attrs:{stretch:""},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"修改密码",name:"first"}},[r("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",height:"450px"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{width:"500px"},attrs:{model:e.ruleForm,rules:e.rules1,"status-icon":"","label-width":"100px"}},[r("el-form-item",{attrs:{label:"当前密码",prop:"passWord"}},[r("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.passWord,callback:function(t){e.$set(e.ruleForm,"passWord",t)},expression:"ruleForm.passWord"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"新密码",prop:"userPassWord"}},[r("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.userPassWord,callback:function(t){e.$set(e.ruleForm,"userPassWord",t)},expression:"ruleForm.userPassWord"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassWord"}},[r("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.confirmPassWord,callback:function(t){e.$set(e.ruleForm,"confirmPassWord",t)},expression:"ruleForm.confirmPassWord"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认")]),e._v(" "),r("el-button",{on:{click:function(t){return e.$router.push({path:"/home"})}}},[e._v("取消")])],1)],1)],1)]),e._v(" "),r("el-tab-pane",{attrs:{label:"修改手机",name:"second"}},[r("div",{staticStyle:{height:"450px",display:"flex","justify-content":"center","align-items":"center"}},[r("el-form",{ref:"Form",staticClass:"demo-ruleForm",staticStyle:{width:"500px"},attrs:{model:e.Form,"status-icon":"",rules:e.rules2,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"当前密码",prop:"userPassWord"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.Form.userPassWord,callback:function(t){e.$set(e.Form,"userPassWord",t)},expression:"Form.userPassWord"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"新手机 +86",prop:"userPhone"}},[r("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.Form.userPhone,callback:function(t){e.$set(e.Form,"userPhone",t)},expression:"Form.userPhone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"验证码",prop:"code"}},[r("el-col",{attrs:{span:13}},[r("el-form-item",{attrs:{prop:""}},[r("el-input",{staticStyle:{width:"100%"},model:{value:e.Form.code,callback:function(t){e.$set(e.Form,"code",e._n(t))},expression:"Form.code"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:7,offset:4}},[r("el-form-item",{attrs:{prop:""}},[r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.code,expression:"code"}],staticClass:"hj-ipt",on:{click:e.get_code}},[e._v("获取验证码")]),e._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.code,expression:"!code"}],staticClass:"hj-ipt"},[e._v(e._s(e.time))])],1)],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm1("Form")}}},[e._v("确认")]),e._v(" "),r("el-button",{on:{click:function(t){return e.$router.push({path:"/home"})}}},[e._v("取消")])],1)],1)],1)]),e._v(" "),r("el-tab-pane",{attrs:{label:"修改微信绑定",name:"third"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.c,expression:"c"}],staticStyle:{"text-align":"center"}},[e._v("\n                    第一步:验证身份\n                ")]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.c,expression:"!c"}],staticStyle:{"text-align":"center"}},[e._v("\n                    第二步:更换要绑定的微信\n                ")]),e._v(" "),r("div",{staticStyle:{height:"450px",display:"flex","justify-content":"center","align-items":"center"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.c,expression:"c"}],staticStyle:{"z-index":"100"},attrs:{id:"div1"}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.c,expression:"!c"}],staticStyle:{"z-index":"100"},attrs:{id:"div2"}})])])],1)],1)])},staticRenderFns:[]};var n=r("C7Lr")(a,i,!1,function(e){r("f0zo")},null,null);t.default=n.exports}});
//# sourceMappingURL=24.c2373f2a1d7d801665ab.js.map