{"version":3,"sources":["webpack:///src/pages/zhangbu/mingxizhang.vue","webpack:///./src/pages/zhangbu/mingxizhang.vue?3c2a","webpack:///./src/pages/zhangbu/mingxizhang.vue"],"names":["mingxizhang","name","mixins","mounted","_this","this","getStorage","_ajax","uuid","workAccountId","accountId","timeMonth","date","msg","length","tableData","kemu","accountant_code","x","forEach","item","c","show","accountant_subject","push","run","ite","split","reverse","join","substr","$nextTick","$refs","treeBox","setCurrentKey","list","data","defaultProps","children","label","pickerOptions","disabledDate","time","getTime","Date","JSON","parse","localStorage","getItem","getFullYear","Array","Number","getMonth","slice","total","dangqianye","pageSize","methods","daochu","_ref","_ref2","download","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","abrupt","promise_default","resolve","reject","me","workId","num","keys_default","document","createElement","setAttribute","csv","zip","body","appendChild","click","removeChild","stop","_x","apply","arguments","_callee2","_context2","change_kemu","change_date","_this2","console","log","handleSizeChange","val","handleCurrentChange","_this3","page","subjectNum","err","tableRowClassName","_ref3","row","rowIndex","zhangbu_mingxizhang","render","_vm","_h","$createElement","_c","_self","staticStyle","background","padding","margin-bottom","font-size","color","text-align","_v","border","margin-top","display","justify-content","attrs","type","on","margin-left","picker-options","value-format","placeholder","change","model","value","callback","$$v","expression","flex","id","width","row-class-name","prop","scopedSlots","_u","key","fn","scope","_s","certificateNumber","flag","_e","current-page","page-sizes","page-size","layout","size-change","current-change","overflow","height","ref","props","node-key","expand-on-click-node","highlight-current","node-click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/41.cb826aa0f12a89fe40a6.js","sourcesContent":["<template>\r\n    <div>\r\n        <div style=\"background: #FFF;padding: 2vh 2vw;margin-bottom: 10vh\">\r\n            <div style=\"font-size: 30px;color: #1C2023;text-align: center;\">明细账</div>\r\n\r\n            <div style=\"border: 1px solid #F8F8FF;padding: 2vh 2vw;margin-top: 2vh\">\r\n\r\n                <div style=\"display: flex;justify-content: flex-end\">\r\n                    <!--<el-button type=\"warning\" @click=\"exportFunc('id','明细账')\">导出</el-button>-->\r\n                    <el-button type=\"warning\" @click=\"daochu\">导出</el-button>\r\n\r\n                    <el-date-picker\r\n                            :picker-options=\"pickerOptions\"\r\n                            @change =\"change_date\"\r\n                            value-format=\"yyyy-MM\"\r\n                            style=\"margin-left: 20px\"\r\n                            v-model=\"date\"\r\n                            type=\"month\"\r\n                            placeholder=\"选择月\">\r\n                    </el-date-picker>\r\n                </div>\r\n\r\n                <div style=\"display: flex;margin-top: 2vh\">\r\n\r\n                    <div style=\"flex: 6;\" id=\"id\">\r\n                        <el-table\r\n                                :data=\"tableData\"\r\n                                style=\"width: 100%\"\r\n                                :row-class-name=\"tableRowClassName\">\r\n                            <el-table-column\r\n                                    prop=\"accountant_code\"\r\n                                    label=\"凭证字号\"\r\n                                    width=\"\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <span v-if=\"scope.row.type  == 2\">{{scope.row.certificateNumber}}</span>\r\n                                    <span v-else>{{scope.row.certificateNumber}}</span>\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    prop=\"certificateTime\"\r\n                                    label=\"生成时间\"\r\n                                    width=\"\">\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    prop=\"accountantCode\"\r\n                                    label=\"科目\">\r\n                                <!--<template slot-scope=\"scope\">-->\r\n                                    <!--<span v-if=\"scope.row.type  == 2\">{{scope.row.accountantSubject}}</span>-->\r\n                                    <!--<span v-else>{{scope.row.accountant_subject}}</span>-->\r\n                                <!--</template>-->\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    prop=\"certificateAbstract\"\r\n                                    label=\"摘要\">\r\n                                <!--<template slot-scope=\"scope\">-->\r\n                                    <!--<span v-if=\"scope.row.type  == 1\">期初余额</span>-->\r\n                                    <!--<span v-else-if=\"scope.row.type == 2\">{{scope.row.certificateAbstract}}</span>-->\r\n                                    <!--<span v-else-if=\"scope.row.type  == 3\">本期合计</span>-->\r\n                                    <!--<span v-else-if=\"scope.row.type == 4\">本年累计</span>-->\r\n                                <!--</template>-->\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    prop=\"totalDebitMoney\"\r\n                                    label=\"借方金额\"\r\n                                    width=\"\">\r\n                                <!--<template slot-scope=\"scope\">-->\r\n                                    <!--<span v-if=\"scope.row.type  == 2\">{{scope.row.totalDebitMoney}}</span>-->\r\n                                    <!--<span v-else>{{scope.row.total_debit_money}}</span>-->\r\n                                <!--</template>-->\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    prop=\"totalCreditMoney\"\r\n                                    label=\"贷方金额\"\r\n                                    width=\"\">\r\n                                <!--<template slot-scope=\"scope\">-->\r\n                                    <!--<span v-if=\"scope.row.type  == 2\">{{scope.row.totalCreditMoney}}</span>-->\r\n                                    <!--<span v-else>{{scope.row.total_credit_money}}</span>-->\r\n                                <!--</template>-->\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    prop=\"\"\r\n                                    label=\"方向\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <span v-if=\"scope.row.flag  == 0\">借</span>\r\n                                    <span v-else-if=\"scope.row.flag  == 1\">贷</span>\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    prop=\"balanceMoney\"\r\n                                    label=\"余额\">\r\n                            </el-table-column>\r\n                        </el-table>\r\n                        <div style=\"display: flex;justify-content: flex-end;margin-top: 1vh\">\r\n                            <el-pagination\r\n                                    @size-change=\"handleSizeChange\"\r\n                                    @current-change=\"handleCurrentChange\"\r\n                                    :current-page=\"dangqianye\"\r\n                                    :page-sizes=\"[10, 20, 30, 40]\"\r\n                                    :page-size=\"pageSize\"\r\n                                    layout=\"total, sizes, prev, pager, next, jumper\"\r\n                                    :total=\"total\">\r\n                            </el-pagination>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div style=\"flex: 2;margin-left: 1vw;overflow: auto;height: 500px;border: 1px solid #CCC;\">\r\n                        <!--<div style=\"margin: 10px 0\">-->\r\n                            <!--<div :class=\"[ i == index? 'hover' : '' ]\" style=\"padding: 5px\" v-for=\"(item,index) in kemu\" :key=\"index\">-->\r\n                                <!--<i style=\"color: deepskyblue\" class=\"el-icon-document\"></i>&nbsp;<a style=\"text-decoration: none\" href=\"#\" @click.prevent=\"change_kemu(item.accountant_code,index)\">{{item.accountant_code}} - {{item.accountant_subject}}</a>-->\r\n                            <!--</div>-->\r\n                            <!--<div style=\"color: #909399;text-align: center\" v-show=\"kemu.length == 0\">暂无数据</div>-->\r\n\r\n                        <!--</div>-->\r\n                        <el-tree\r\n                                :data=\"kemu\"\r\n                                :props=\"defaultProps\"\r\n                                node-key=\"show\"\r\n                                :expand-on-click-node=\"false\"\r\n                                @node-click=\"change_kemu\"\r\n                                :highlight-current=\"true\"\r\n                                ref=\"treeBox\"\r\n                                >\r\n                        </el-tree>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import mix from \"@/mixins/mixins\"\r\n    export default {\r\n        name: \"xianjinliuliangbiao\",\r\n        mixins:[mix],\r\n        mounted() {\r\n            this.getStorage()\r\n\r\n            this._ajax('userHomePage/selectChange',{\r\n                // uuid:\"f00d9a940dd5478aa90e560ed2859cd7\",\r\n                // workAccountId:140,\r\n                uuid:this.uuid,\r\n                workAccountId:this.accountId,\r\n                timeMonth:this.date,\r\n            }, msg => {\r\n                if(msg.length == 0){\r\n                    this.tableData = []\r\n                    this.kemu = []\r\n                    this.name = \"\"\r\n\r\n                    return\r\n                }\r\n                // this.name = msg[0].accountant_code\r\n                // // this.kemu = msg\r\n                //\r\n                // msg.map(item=>{\r\n                //     item.show = item.accountant_code+\" \"+item.accountant_subject\r\n                //\r\n                // })\r\n                //\r\n                // //p为父类的编号\r\n                // const p = msg.filter(item=>{\r\n                //     return item.accountant_code.length == 4\r\n                // })\r\n                // //c为子类的编号\r\n                // const c = msg.filter(item=>{\r\n                //     return item.accountant_code.length == 6\r\n                // })\r\n                // // 为每个p加空孩子\r\n                // p.map(item=>{\r\n                //     item.children = []\r\n                // })\r\n                // // 塞入孩子\r\n                // p.forEach(ite=>{\r\n                //     c.forEach(item=>{\r\n                //         let x = item.accountant_code.split(\"\")\r\n                //         let y = x[0]+x[1]+x[2]+x[3]\r\n                //         if(ite.accountant_code == y){\r\n                //             ite.children.push(item)\r\n                //         }\r\n                //\r\n                //     })\r\n                // })\r\n                //\r\n                // this.kemu = p\r\n                this.name = msg[0].accountant_code\r\n\r\n                const x = []\r\n                msg.forEach(item=>{\r\n                    item.c = []\r\n                    item.show = item.accountant_code + '' + item.accountant_subject\r\n                    if(item.accountant_code.length == 4){\r\n                        x.push(item)\r\n                    }\r\n                })\r\n                // 递归\r\n                run(x);\r\n                function run(x) {\r\n                    x.forEach(item=>{\r\n                        msg.forEach(ite=>{\r\n                            if(item.accountant_code === ite.accountant_code.split(\"\").reverse().join(\"\").substr(2).split(\"\").reverse().join(\"\")){\r\n                                item.c.push(ite)\r\n                            }\r\n                        })\r\n                        run(item.c)\r\n                    })\r\n                }\r\n                this.kemu = x\r\n\r\n                this.$nextTick(() => {\r\n                    // treeBox 元素的ref   value 绑定的node-key\r\n                    this.$refs.treeBox.setCurrentKey(x[0].show);\r\n                });\r\n\r\n                // this._message(1,\"科目成功\")\r\n                this.list()\r\n            })\r\n\r\n        },\r\n        data() {\r\n            return {\r\n\r\n                defaultProps: {\r\n                    children: 'c',\r\n                    label: 'show'\r\n                },\r\n                pickerOptions: {\r\n                    disabledDate(time) {\r\n                        return time.getTime() < new Date(JSON.parse(localStorage.getItem('start_date'))) - 24 * 3600 * 1000;\r\n                    },\r\n                },\r\n\r\n                kemu:[],\r\n                date: new Date().getFullYear() + '-' + (Array(2).join(0) + (Number(new Date().getMonth())+1)).slice(-2),\r\n                tableData: [],\r\n                total:0,\r\n                dangqianye:1,\r\n                pageSize:10,\r\n                name:\"\"\r\n            }\r\n        },\r\n        methods: {\r\n\r\n\r\n            daochu(){\r\n                let me = this\r\n\r\n                async function download(data){\r\n                    return new Promise((resolve,reject)=>{\r\n                        me._ajax('zip/zipDetailsAccount',{\r\n                            uuid:me.uuid,\r\n                            workId :me.accountId,\r\n                            time :me.date,\r\n                            num:me.name\r\n                        }, msg => {\r\n                            if(Object.keys(msg[0]).length == 0){\r\n                                reject()\r\n                            }else{\r\n                                var a = document.createElement('a');\r\n                                if(data == 'csv'){\r\n                                    a.setAttribute('href', `http://${msg[0].csv}`);\r\n                                }else{\r\n                                    a.setAttribute('href', `http://${msg[0].zip}`);\r\n                                }\r\n                                document.body.appendChild(a);\r\n                                a.click();\r\n                                document.body.removeChild(a);\r\n                                resolve()\r\n                            }\r\n                        })\r\n                    })\r\n                }\r\n                async function init(){\r\n                    await download('csv')\r\n                    download('zip')\r\n                }\r\n                init()\r\n            },\r\n\r\n\r\n            change_kemu(data){\r\n                this.dangqianye = 1\r\n                this.name = data.accountant_code\r\n                this.list()\r\n            },\r\n            change_date(){\r\n                this.tableData = []\r\n                this.total = 0\r\n                this.dangqianye = 1\r\n\r\n                this._ajax('userHomePage/selectChange',{\r\n                    uuid:this.uuid,\r\n                    workAccountId:this.accountId,\r\n                    timeMonth:this.date,\r\n                }, msg => {\r\n                    if(msg.length == 0){\r\n                        this.tableData = []\r\n                        this.kemu = []\r\n                        this.name = \"\"\r\n\r\n                        return\r\n                    }\r\n\r\n                    this.name = msg[0].accountant_code\r\n                    const x = []\r\n                    msg.forEach(item=>{\r\n                        item.c = []\r\n                        item.show = item.accountant_code + '' + item.accountant_subject\r\n                        if(item.accountant_code.length == 4){\r\n                            x.push(item)\r\n                        }\r\n                    })\r\n                    console.log(x)\r\n                    run(x);\r\n                    function run(x) {\r\n                        x.forEach(item=>{\r\n\r\n                            msg.forEach(ite=>{\r\n                                if(item.accountant_code === ite.accountant_code.split(\"\").reverse().join(\"\").substr(2).split(\"\").reverse().join(\"\")){\r\n                                    item.c.push(ite)\r\n\r\n\r\n                                }\r\n\r\n                            })\r\n\r\n                            run(item.c) //\r\n                        })\r\n                    }\r\n                    this.kemu = x\r\n\r\n\r\n                    this.$nextTick(() => {\r\n                        // treeBox 元素的ref   value 绑定的node-key\r\n                        this.$refs.treeBox.setCurrentKey(x[0].show);\r\n                    });\r\n\r\n\r\n\r\n                    // this._message(1,\"科目成功\")\r\n                    this.list()\r\n                })\r\n            },\r\n\r\n\r\n\r\n            handleSizeChange(val) {\r\n                console.log(`每页 ${val} 条`);\r\n                if(this.kemu.length == 0){\r\n                    return\r\n                }\r\n                this.pageSize = val\r\n                this.list()\r\n            },\r\n            handleCurrentChange(val) {\r\n                console.log(`当前页: ${val}`);\r\n                this.dangqianye = val\r\n                this.list()\r\n            },\r\n            list(){\r\n                console.log(this.dangqianye)\r\n                this.tableData = []\r\n                this._ajax('common/selectDetailsAccount1',{\r\n                    // uuid:'f00d9a940dd5478aa90e560ed2859cd7',\r\n                    // workAccountId:140,\r\n                    uuid:this.uuid,\r\n                    workAccountId:this.accountId,\r\n                    page:this.dangqianye - 1,\r\n                    pageSize:this.pageSize,\r\n                    timeMonth:this.date,\r\n                    subjectNum:this.name\r\n                }, msg => {\r\n                    // console.log(msg[0][\"当期分页规则\"])\r\n                    // 先把总数赋值上(用户选择10我得传11,因为后台把页数也给我算一项了)\r\n                    // this.total = Number(msg[msg.length - 1].size)\r\n\r\n                    try\r\n                    {\r\n                        this.total = msg[0][\"当期分页规则\"][msg[0][\"当期分页规则\"].length-1]\r\n\r\n                    }\r\n                    catch(err)\r\n                    {\r\n                        return\r\n                    }\r\n\r\n                    // 把最后一项不要了\r\n                    // msg.pop()\r\n                    msg = msg[0].data\r\n\r\n                    //从小到大的自定义排序函数\r\n                    // function compare(property){\r\n                    //     return function(a,b){\r\n                    //         var value1 = a[property];\r\n                    //         var value2 = b[property];\r\n                    //         return value1 - value2;\r\n                    //     }\r\n                    // }\r\n                    //根据type排序(1是期初,2是凭证,3是本期,4是本年)\r\n                    // msg.sort(compare('type'))\r\n\r\n                    //期初是本月第一天,本期和本年是本月最后一天(后台没反,自己凑)\r\n                    //用户选择的年\r\n                    // let y = this.date.split('-')[0]\r\n                    //用户选择的月\r\n                    // let m = this.date.split('-')[1]\r\n                    //第三个参数为0是本月最后一天的时间戳\r\n                    // var lastDay= new Date(y,m,0);\r\n                    // 获取年\r\n                    // var year = lastDay.getFullYear();\r\n                    // 获取月\r\n                    // var month = lastDay.getMonth() + 1;\r\n                    //补0操作,后台要月和日不足10要加0\r\n                    // month = month < 10 ? '0'+ month : month;\r\n                    // var day = lastDay.getDate();\r\n                    // day = day < 10 ? '0'+day : day;\r\n\r\n                    //自己凑得借或者贷(后台没反凭证的方向)\r\n                    //找到期初\r\n                    // const x =  msg.find(item=>{\r\n                    //     return item.type == 1\r\n                    // })\r\n                    //保存期初的方向\r\n                    // let a = x.flag\r\n\r\n                    // 把刚才处理的方向和时间装进去\r\n                    // msg.map(item=>{\r\n                    //     item.flag = a\r\n                    //     if(item.type == 1){\r\n                    //         item.certificateTime = year + '-' + month + \"-\" + '01'\r\n                    //     }else if(item.type == 3 || item.type == 4){\r\n                    //         item.certificateTime = year + '-' + month + \"-\" + day\r\n                    //     }\r\n                    // })\r\n\r\n                    // 赋值给要显示的数据\r\n                    this.tableData = msg\r\n\r\n                    // 里面有可能会有期初设置找到她\r\n                    // let qichushezhi = this.tableData.findIndex(item=>{\r\n                    //     return item.type == 2 && item.accountantSubject == \"\"\r\n                    // })\r\n                    // 把期初设置删除\r\n                    // this.tableData.splice(qichushezhi,1)\r\n\r\n                    // this._message(1,\"tableData成功\")\r\n                })\r\n            },\r\n\r\n            tableRowClassName({row, rowIndex}) {\r\n                if (rowIndex%2 != 0) {\r\n                    return 'lan';\r\n                }\r\n                return \"\";\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .el-table .lan {\r\n        background: rgba(68,160,255,0.05);\r\n    }\r\n    .has-gutter{\r\n        background: red!important;\r\n    }\r\n    .hover{\r\n        background: rgba(96,105,114,0.3);\r\n        border-radius: 5px;\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/zhangbu/mingxizhang.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"background\":\"#FFF\",\"padding\":\"2vh 2vw\",\"margin-bottom\":\"10vh\"}},[_c('div',{staticStyle:{\"font-size\":\"30px\",\"color\":\"#1C2023\",\"text-align\":\"center\"}},[_vm._v(\"明细账\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"border\":\"1px solid #F8F8FF\",\"padding\":\"2vh 2vw\",\"margin-top\":\"2vh\"}},[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"flex-end\"}},[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":_vm.daochu}},[_vm._v(\"导出\")]),_vm._v(\" \"),_c('el-date-picker',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"picker-options\":_vm.pickerOptions,\"value-format\":\"yyyy-MM\",\"type\":\"month\",\"placeholder\":\"选择月\"},on:{\"change\":_vm.change_date},model:{value:(_vm.date),callback:function ($$v) {_vm.date=$$v},expression:\"date\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"margin-top\":\"2vh\"}},[_c('div',{staticStyle:{\"flex\":\"6\"},attrs:{\"id\":\"id\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"row-class-name\":_vm.tableRowClassName}},[_c('el-table-column',{attrs:{\"prop\":\"accountant_code\",\"label\":\"凭证字号\",\"width\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.type  == 2)?_c('span',[_vm._v(_vm._s(scope.row.certificateNumber))]):_c('span',[_vm._v(_vm._s(scope.row.certificateNumber))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"certificateTime\",\"label\":\"生成时间\",\"width\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"accountantCode\",\"label\":\"科目\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"certificateAbstract\",\"label\":\"摘要\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"totalDebitMoney\",\"label\":\"借方金额\",\"width\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"totalCreditMoney\",\"label\":\"贷方金额\",\"width\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"方向\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.flag  == 0)?_c('span',[_vm._v(\"借\")]):(scope.row.flag  == 1)?_c('span',[_vm._v(\"贷\")]):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"balanceMoney\",\"label\":\"余额\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"flex-end\",\"margin-top\":\"1vh\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.dangqianye,\"page-sizes\":[10, 20, 30, 40],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"flex\":\"2\",\"margin-left\":\"1vw\",\"overflow\":\"auto\",\"height\":\"500px\",\"border\":\"1px solid #CCC\"}},[_c('el-tree',{ref:\"treeBox\",attrs:{\"data\":_vm.kemu,\"props\":_vm.defaultProps,\"node-key\":\"show\",\"expand-on-click-node\":false,\"highlight-current\":true},on:{\"node-click\":_vm.change_kemu}})],1)])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3512e269\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/zhangbu/mingxizhang.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3512e269\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./mingxizhang.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./mingxizhang.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./mingxizhang.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3512e269\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./mingxizhang.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/zhangbu/mingxizhang.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}