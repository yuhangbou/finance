{"version":3,"sources":["webpack:///src/pages/fapiao/fapiaoguanli_xiugai.vue","webpack:///./src/pages/fapiao/fapiaoguanli_xiugai.vue?7545","webpack:///./src/pages/fapiao/fapiaoguanli_xiugai.vue"],"names":["fapiaoguanli_xiugai","name","mixins","inject","data","_rules","show_huoban","invoicePhoto1","list","form","invoiceType","invoicingDate","authenticationDate","invoiceNumber","supplierType","supplierName","money","taxRate","priceTaxTotal","invoicePhoto","rules","required","message","trigger","defineProperty_default","components","addHuoBan","add_yewuhuoban","mounted","_this2","this","getStorage","_ajax","company_supplier_name","uuid","workAccountId","accountId","msg","invoiceId","$route","query","company_invoice_type","invoicing_date","authentication_date","company_invoice_number","company_supplier_type","tax_rate","price_tax_total","invoice_photo","methods","add_huoban_ok","x","_this3","submitForm","formName","_this4","$refs","validate","valid","console","log","extends_default","_message","$router","push","path","set_router","quxiao_liushui","_this5","accountingId","company_accounting_id","liushui","quxiao_pingzheng","_this6","certificateUuid","company_certificate_uuid","pingzheng","change","file","_this7","a","$message","type","duration","blob","callback","FileReader","onload","e","target","result","readAsDataURL","blobToDataURL","raw","dataurl","encode","stringify_default","split","close","kind","number","total","pretax_amount","tax","toFixed","date","forEach","item","index","length","_this","undefined","fName","suffix","substr","lastIndexOf","storeAs","Date","parse","browser_default","Wrapper","$ali","multipartUpload","then","res","requestUrls","catch","err","fapiao_fapiaoguanli_xiugai","render","_vm","_h","$createElement","_c","_self","staticStyle","background","padding","font-size","color","text-align","_v","border","margin-top","attrs","on-change","action","show-file-list","auto-upload","border-bottom","margin","ref","model","label-width","display","flex-wrap","width","label","prop","placeholder","value","$$v","$set","expression","value-format","span","_l","key","offset","icon","on","click","$event","staticClass","src","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/18.e10d5dcfaf57872d2598.js","sourcesContent":["<template>\n    <div>\n        <div style=\"background: #FFF;padding: 2vh 2vw;\">\n            <div style=\"font-size: 30px;color: #1C2023;text-align: center;\">编辑发票</div>\n            <div style=\"border: 1px solid #F8F8FF;padding: 2vh 2vw;margin-top: 2vh\">\n                <el-upload :on-change=\"change\" action=\"\" :show-file-list=\"false\" :auto-upload=\"false\">\n                    <el-button type=\"warning\">点击上传</el-button>\n                </el-upload>\n                <div style=\"border-bottom: 1px solid rgba(96,105,114,0.3);margin: 3vh 0\"></div>\n\n                <el-form ref=\"form\" :model=\"form\" label-width=\"150px\" :rules=\"rules\">\n                    <div style=\"display: flex;flex-wrap: wrap\">\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"发票类型：\" prop=\"invoiceType\">\n                                <el-select v-model=\"form.invoiceType\" placeholder=\"请选择\" style=\"width: 100%;\">\n                                    <el-option label=\"专票\" value=\"0\"></el-option>\n                                    <el-option label=\"普票\" value=\"1\"></el-option>\n                                </el-select>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"开票日期：\" prop=\"invoicingDate\">\n                                <el-date-picker style=\"width: 100%;\" type=\"date\" placeholder=\"\" value-format=\"yyyy-MM-dd\" v-model=\"form.invoicingDate\"></el-date-picker>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"认证日期：\">\n                                <el-date-picker style=\"width: 100%;\" type=\"date\" placeholder=\"\" value-format=\"yyyy-MM-dd\" v-model=\"form.authenticationDate\"></el-date-picker>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"发票号码：\" prop=\"invoiceNumber\">\n                                <el-input v-model=\"form.invoiceNumber\" style=\"width: 100%;\"></el-input>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"供应商/客户类型：\" prop=\"supplierType\">\n                                <el-select v-model=\"form.supplierType\" placeholder=\"请选择\" style=\"width: 100%;\">\n                                    <el-option label=\"供应商\" value=\"供应商\"></el-option>\n                                    <el-option label=\"客户\" value=\"客户\"></el-option>\n                                </el-select>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 440px;\">\n                            <el-col :span=\"19\">\n                                <el-form-item label=\"供应商/客户名称：\" prop=\"supplierName\">\n                                    <el-select v-model=\"form.supplierName\" placeholder=\"请选择\" style=\"width: 100%;\">\n                                        <el-option v-for=\"item in list\" :key=\"item.company_supplier_name\" :label=\"item.company_supplier_name\" :value=\"item.company_supplier_name\"></el-option>\n                                    </el-select>\n                                </el-form-item>\n                            </el-col>\n                            <el-col :span=\"3\" :offset=\"1\">\n                                <el-button @click=\"show_huoban=true\" type=\"\" icon=\"el-icon-plus\"></el-button>\n                            </el-col>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"金额：\" prop=\"money\">\n                                <el-input v-model=\"form.money\" style=\"width: 100%;\"></el-input>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"税率：\" prop=\"taxRate\">\n                                <el-input v-model=\"form.taxRate\" style=\"width: 100%;\"></el-input>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"价税合计：\" prop=\"priceTaxTotal\">\n                                <el-input v-model=\"form.priceTaxTotal\" style=\"width: 100%;\"></el-input>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"元\" label-width=\"30px\">\n                            </el-form-item>\n\n                        </div>\n\n\n                        <!--<div  v-if=\"liushui\" style=\"width: 400px;\">-->\n                            <!--<el-form-item label=\"关联流水：\">-->\n                                <!--<el-input disabled v-model=\"form.company_accounting_id\" style=\"width: 100%;\"></el-input>-->\n                            <!--</el-form-item>-->\n                        <!--</div>-->\n\n                        <!--<div>-->\n                            <!--<div v-if=\"liushui\" style=\"width: 100px;\">-->\n                                <!--<el-form-item label=\"\" label-width=\"10px\">-->\n                                    <!--<a href=\"#\" style=\"text-decoration: none\" @click.prevent=\"quxiao_liushui\">取消关联</a>-->\n                                <!--</el-form-item>-->\n                            <!--</div>-->\n                        <!--</div>-->\n\n                        <!--<div v-if=\"pingzheng\" style=\"width: 400px;\">-->\n                            <!--<el-form-item  label=\"关联凭证：\">-->\n                                <!--<el-input disabled v-model=\"form.company_certificate_uuid\" style=\"width: 100%;\"></el-input>-->\n                            <!--</el-form-item>-->\n                        <!--</div>-->\n\n                        <!--<div>-->\n                            <!--<div v-if=\"pingzheng\" style=\"width: 100px;\">-->\n                                <!--<el-form-item label=\"\" label-width=\"10px\">-->\n                                    <!--<a href=\"#\" style=\"text-decoration: none\" @click.prevent=\"quxiao_pingzheng\">取消关联</a>-->\n                                <!--</el-form-item>-->\n                            <!--</div>-->\n                        <!--</div>-->\n\n                        <!--<div style=\"width: 50px;font-size: 16px;color: #008CFF;line-height: 40px\">-->\n                           <!--查看-->\n                        <!--</div>-->\n                    </div>\n\n                </el-form>\n\n                <div style=\"margin: 3vh\">\n                    <img v-if=\"form.invoicePhoto\" :src=\"form.invoicePhoto\" class=\"avatar\">\n                </div>\n\n                <div style=\"border-bottom: 1px solid rgba(96,105,114,0.3);\"></div>\n\n                <div style=\"margin-top: 3vh\">\n                    <el-button type=\"warning\"  @click=\"submitForm('form')\">保存</el-button>\n                    <el-button type=\"info\" style=\"\" @click=\"$router.push({path:'/home/fapiao/fapiaoguanli'})\">取消</el-button>\n                </div>\n\n            </div>\n        </div>\n        <addHuoBan v-if=\"show_huoban\" @add_huoban_ok = \"add_huoban_ok\"></addHuoBan>\n\n    </div>\n</template>\n\n<script>\n    import mix from \"@/mixins/mixins\"\n    import OSS from 'ali-oss'\n    import addHuoBan from \"@/components/yuchunhui/add_yewuhuoban\"\n\n    export default {\n        name: \"xianjinliuliangbiao\",\n        mixins:[mix],\n        inject:['reload',\"set_router\"],\n        data() {\n            return {\n                show_huoban:false,\n\n                invoicePhoto1:\"\",\n                // liushui:\"\",\n                // pingzheng:'',\n\n                list:[],\n                form:{\n                    // 发票类型\n                    invoiceType:'',\n                    // 开票日期\n                    invoicingDate:'',\n                    // 认证日期\n                    authenticationDate:'',\n                    // 发票号码\n                    invoiceNumber:'',\n                    // 供应商或客户\n                    supplierType:\"\",\n                    // 供应商或客户的名字\n                    supplierName:'',\n                    // 金额\n                    money:'',\n                    // 税率\n                    taxRate:'',\n                    // 价税合计\n                    priceTaxTotal:'',\n                    // 图片\n                    invoicePhoto:\"\"\n\n                },\n                rules: {\n                    invoiceType: [\n                        { required: true, message: '请选择发票类型', trigger: 'change' },\n                    ],\n                    invoicingDate: [\n                        { required: true, message: '请选择开票日期', trigger: 'change' }\n                    ],\n                    invoiceNumber:[\n                        { required: true, message: '请输入发票号码', trigger: 'blur' }\n                    ],\n                    supplierType:[\n                        { required: true, message: '请选择供应商或客户', trigger: 'change' }\n                    ],\n                    supplierName:[\n                        { required: true, message: '请选择', trigger: 'change' }\n                    ],\n                    supplierType:[\n                        { required: true, message: '请选择供应商或客户', trigger: 'change' }\n                    ],\n                    money:[\n                        { required: true, message: '请输入金额', trigger: 'blur' }\n                    ],\n                    taxRate:[\n                        { required: true, message: '请输入税率', trigger: 'blur' }\n                    ],\n                    priceTaxTotal:[\n                        { required: true, message: '请选择价税合计', trigger: 'blur' }\n                    ],\n                },\n            }\n        },\n        components:{\n            addHuoBan\n        },\n        mounted(){\n            this.getStorage()\n\n            this._ajax('userAccounts/selectCompanySupplierName',{\n                company_supplier_name:'',\n                uuid:this.uuid,\n                workAccountId:this.accountId,\n            }, msg => {\n                this.list = msg\n                // this._message(1,\"供应商客户成功\")\n\n                this._ajax('userAccounts/selectUserInvoiceOne',{\n                    uuid:this.uuid,\n                    workAccountId:this.accountId,\n                    invoiceId:this.$route.query.invoiceId\n                }, msg => {\n                    this.form.invoiceType = msg.company_invoice_type\n                    this.form.invoicingDate = msg.invoicing_date\n                    this.form.authenticationDate = msg.authentication_date\n\n                    this.form.invoiceNumber = msg.company_invoice_number\n                    this.form.supplierType = msg.company_supplier_type\n                    this.form.supplierName = msg.company_supplier_name\n                    this.form.money = msg.money\n                    this.form.taxRate = msg.tax_rate\n                    this.form.priceTaxTotal = msg.price_tax_total\n                    this.form.invoicePhoto = msg.invoice_photo\n\n                    // this.liushui = msg.company_accounting_id\n                    // this.pingzheng = msg.company_certificate_uuid\n                    // this._message(1,\"反显成功\")\n                })\n            })\n        },\n\n        methods: {\n            add_huoban_ok(x){\n                if(x == 1){\n                    this._ajax('userAccounts/selectCompanySupplierName',{\n                        company_supplier_name:'',\n                        uuid:this.uuid,\n                        workAccountId:this.accountId,\n                    }, msg => {\n                        this.list = msg\n                        this.show_huoban = false\n                    })\n                }else{\n                    this.show_huoban = false\n                }\n            },\n\n            submitForm(formName) {\n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                        this._ajax('userAccounts/updateUserInvoice',{\n                            uuid:this.uuid,\n                            workAccountId:this.accountId,\n                            ...this.form,\n                            invoiceId:this.$route.query.invoiceId\n                        }, msg => {\n                            this._message(1,\"修改成功\")\n                            this.$router.push({path:\"/home/fapiao/fapiaoguanli\"})\n                            this.set_router(\"/home/fapiao/fapiaoguanli\")\n                        })\n                    } else {\n                        console.log('error submit!!');\n                        return false;\n                    }\n                });\n            },\n            quxiao_liushui(){\n                this._ajax('userAccounts/deleteInvoiceFlowing',{\n                    uuid:this.uuid,\n                    workAccountId:this.accountId,\n                    invoiceId:this.$route.query.invoiceId,\n                    accountingId:this.form.company_accounting_id\n                }, msg => {\n                    this._message(1,\"取消关联流水成功\")\n                    this.liushui = ''\n                })\n            },\n            quxiao_pingzheng(){\n                this._ajax('userAccounts/deleteInvoiceCrtificate',{\n                    uuid:this.uuid,\n                    workAccountId:this.accountId,\n                    invoiceId:this.$route.query.invoiceId,\n                    certificateUuid:this.form.company_certificate_uuid\n                }, msg => {\n                    this._message(1,\"取消关联凭证成功\")\n                    this.pingzheng = ''\n                })\n            },\n\n\n            // 上传文件\n            change (file) {\n                var a = this.$message({\n                    type:\"warning\",\n                    message:'发票识别中请稍后',\n                    duration:0\n                })\n                function blobToDataURL(blob, callback) {\n                    var a = new FileReader();\n                    a.onload = function (e) { callback(e.target.result); }\n                    a.readAsDataURL(blob);\n                }\n                blobToDataURL(file.raw,  (dataurl)=> {\n                    // this.form.invoicePhoto = dataurl\n                    this._ajax('common/invoice',{\n                        encode:JSON.stringify(dataurl.split(\",\")[1])\n                    }, msg => {\n                        a.close()\n\n                        this._message(1,\"识别成功\")\n\n\n                        this.form = {\n                            // 发票类型\n                            invoiceType:'',\n                                // 开票日期\n                                invoicingDate:'',\n                                // 认证日期\n                                authenticationDate:'',\n                                // 发票号码\n                                invoiceNumber:'',\n                                // 供应商或客户\n                                supplierType:\"\",\n                                // 供应商或客户的名字\n                                supplierName:'',\n                                // 金额\n                                money:'',\n                                // 税率\n                                taxRate:'',\n                                // 价税合计\n                                priceTaxTotal:'',\n                                // 图片\n                                invoicePhoto:'',\n\n                        }\n\n\n                        this.form.invoicePhoto = this.invoicePhoto1\n\n                        this.form.invoicePhoto = this.invoicePhoto1\n\n                        this.form.invoiceId = msg.kind\n                        this.form.invoiceNumber = msg.number\n                        this.form.priceTaxTotal = msg.total\n                        this.form.money = msg.pretax_amount\n\n                        // 税率\n                        this.form.taxRate = (((msg.tax/msg.pretax_amount).toFixed(2))*100)+ '%'\n\n                        let x = \"\"\n                        msg.date.split(\"\").forEach((item,index)=>{\n                            if(item == \"年\" || item == \"月\" || item ==\"日\"){\n                                if(index != (msg.date.split(\"\").length)-1){\n                                    x+=\"-\"\n\n                                }\n\n                            }else{\n                                x+=item\n                            }\n                        })\n                        this.form.invoicingDate = x\n                    })\n\n                });\n\n\n                var _this = this;\n                if (file == undefined) {\n                    return false;\n                }\n                var fName = file.name,\n                    suffix = fName.substr(fName.lastIndexOf(\".\")),\n                    nda = 'user-herder' + Date.parse(new Date()) / 1000,\n                    storeAs = nda + suffix;\n                var client = new OSS.Wrapper(this.$ali);\n                client.multipartUpload(storeAs, file.raw).then(function (result) {\n                    // console.log(result.res.requestUrls[0])\n                    _this.invoicePhoto1 = result.res.requestUrls[0].split('?')[0];\n                    // _this.$message({\n                    //     message: '上传成功',\n                    //     type: 'success'\n                    // });\n\n                }).catch(function (err) {\n                    console.log(err);\n                    _this.$message({\n                        message: '服务器繁忙，请稍后再试',\n                        type: 'error'\n                    });\n                });\n\n            },\n        },\n    }\n</script>\n\n<style>\n    .avatar-uploader .el-upload {\n        border: 1px dashed #d9d9d9;\n        border-radius: 6px;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n    }\n    .avatar-uploader .el-upload:hover {\n        border-color: #409EFF;\n    }\n    .avatar-uploader-icon {\n        font-size: 28px;\n        color: #8c939d;\n        width: 178px;\n        height: 178px;\n        line-height: 178px;\n        text-align: center;\n    }\n    .avatar {\n        width: 178px;\n        height: 178px;\n        display: block;\n    }\n\n    .r{\n        width: 100%;\n        text-align: right;\n        margin-top: 3vh;\n    }\n    .l{\n        width: 100%;\n        text-align: left;\n        margin-top: 3vh;\n        margin-left: 1vw;\n    }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/fapiao/fapiaoguanli_xiugai.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"background\":\"#FFF\",\"padding\":\"2vh 2vw\"}},[_c('div',{staticStyle:{\"font-size\":\"30px\",\"color\":\"#1C2023\",\"text-align\":\"center\"}},[_vm._v(\"编辑发票\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"border\":\"1px solid #F8F8FF\",\"padding\":\"2vh 2vw\",\"margin-top\":\"2vh\"}},[_c('el-upload',{attrs:{\"on-change\":_vm.change,\"action\":\"\",\"show-file-list\":false,\"auto-upload\":false}},[_c('el-button',{attrs:{\"type\":\"warning\"}},[_vm._v(\"点击上传\")])],1),_vm._v(\" \"),_c('div',{staticStyle:{\"border-bottom\":\"1px solid rgba(96,105,114,0.3)\",\"margin\":\"3vh 0\"}}),_vm._v(\" \"),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"150px\",\"rules\":_vm.rules}},[_c('div',{staticStyle:{\"display\":\"flex\",\"flex-wrap\":\"wrap\"}},[_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"发票类型：\",\"prop\":\"invoiceType\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.invoiceType),callback:function ($$v) {_vm.$set(_vm.form, \"invoiceType\", $$v)},expression:\"form.invoiceType\"}},[_c('el-option',{attrs:{\"label\":\"专票\",\"value\":\"0\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"普票\",\"value\":\"1\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"开票日期：\",\"prop\":\"invoicingDate\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"placeholder\":\"\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.form.invoicingDate),callback:function ($$v) {_vm.$set(_vm.form, \"invoicingDate\", $$v)},expression:\"form.invoicingDate\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"认证日期：\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"placeholder\":\"\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.form.authenticationDate),callback:function ($$v) {_vm.$set(_vm.form, \"authenticationDate\", $$v)},expression:\"form.authenticationDate\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"发票号码：\",\"prop\":\"invoiceNumber\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.form.invoiceNumber),callback:function ($$v) {_vm.$set(_vm.form, \"invoiceNumber\", $$v)},expression:\"form.invoiceNumber\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"供应商/客户类型：\",\"prop\":\"supplierType\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.supplierType),callback:function ($$v) {_vm.$set(_vm.form, \"supplierType\", $$v)},expression:\"form.supplierType\"}},[_c('el-option',{attrs:{\"label\":\"供应商\",\"value\":\"供应商\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"客户\",\"value\":\"客户\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"440px\"}},[_c('el-col',{attrs:{\"span\":19}},[_c('el-form-item',{attrs:{\"label\":\"供应商/客户名称：\",\"prop\":\"supplierName\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.supplierName),callback:function ($$v) {_vm.$set(_vm.form, \"supplierName\", $$v)},expression:\"form.supplierName\"}},_vm._l((_vm.list),function(item){return _c('el-option',{key:item.company_supplier_name,attrs:{\"label\":item.company_supplier_name,\"value\":item.company_supplier_name}})}),1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3,\"offset\":1}},[_c('el-button',{attrs:{\"type\":\"\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){_vm.show_huoban=true}}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"金额：\",\"prop\":\"money\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.form.money),callback:function ($$v) {_vm.$set(_vm.form, \"money\", $$v)},expression:\"form.money\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"税率：\",\"prop\":\"taxRate\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.form.taxRate),callback:function ($$v) {_vm.$set(_vm.form, \"taxRate\", $$v)},expression:\"form.taxRate\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"价税合计：\",\"prop\":\"priceTaxTotal\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.form.priceTaxTotal),callback:function ($$v) {_vm.$set(_vm.form, \"priceTaxTotal\", $$v)},expression:\"form.priceTaxTotal\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"元\",\"label-width\":\"30px\"}})],1)])]),_vm._v(\" \"),_c('div',{staticStyle:{\"margin\":\"3vh\"}},[(_vm.form.invoicePhoto)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.form.invoicePhoto}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticStyle:{\"border-bottom\":\"1px solid rgba(96,105,114,0.3)\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"3vh\"}},[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){return _vm.submitForm('form')}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":function($event){return _vm.$router.push({path:'/home/fapiao/fapiaoguanli'})}}},[_vm._v(\"取消\")])],1)],1)]),_vm._v(\" \"),(_vm.show_huoban)?_c('addHuoBan',{on:{\"add_huoban_ok\":_vm.add_huoban_ok}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-77d34737\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/fapiao/fapiaoguanli_xiugai.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-77d34737\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./fapiaoguanli_xiugai.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./fapiaoguanli_xiugai.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./fapiaoguanli_xiugai.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-77d34737\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./fapiaoguanli_xiugai.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/fapiao/fapiaoguanli_xiugai.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}