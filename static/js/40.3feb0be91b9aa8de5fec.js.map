{"version":3,"sources":["webpack:///src/pages/pingzhengguanli/xinzengfapiao.vue","webpack:///./src/pages/pingzhengguanli/xinzengfapiao.vue?90a6","webpack:///./src/pages/pingzhengguanli/xinzengfapiao.vue"],"names":["xinzengfapiao","name","mixins","data","_rules","show_huoban","invoicePhoto1","list","form","invoiceType","invoicingDate","authenticationDate","invoiceNumber","supplierType","supplierName","money","taxRate","priceTaxTotal","invoicePhoto","rules","required","message","trigger","defineProperty_default","components","addHuoBan","add_yewuhuoban","mounted","_this2","this","getStorage","_ajax","company_supplier_name","uuid","workAccountId","accountId","msg","$route","query","from","no_show_storage","sessionStorage","getItem","JSON","parse","removeItem","methods","add_huoban_ok","x","_this3","add_huoban","submitForm_pingzheng","formName","_this4","$refs","validate","valid","console","log","setItem","stringify_default","$router","push","path","certificateUuid","extends_default","type1","_message","type","localStorage","cancel_pingzheng","submitForm_fapiaoguanli","_this5","tianjiapingzheng","_this6","checked","pipeixianyoupingzheng","_this7","pipeixianyouliushui","_this8","submitForm_liushui","_this9","accountingId","go","change","file","_this10","a","$message","duration","blob","callback","FileReader","onload","e","target","result","readAsDataURL","blobToDataURL","raw","dataurl","encode","split","close","invoiceId","kind","number","total","pretax_amount","tax","toFixed","date","forEach","item","index","length","_this","undefined","fName","suffix","substr","lastIndexOf","storeAs","Date","browser_default","Wrapper","$ali","multipartUpload","then","res","requestUrls","catch","err","pingzhengguanli_xinzengfapiao","render","_vm","_h","$createElement","_c","_self","staticStyle","background","padding","margin-bottom","font-size","color","text-align","_v","border","margin-top","attrs","on-change","action","show-file-list","auto-upload","border-bottom","margin","ref","model","label-width","display","flex-wrap","width","label","prop","placeholder","value","$$v","$set","expression","value-format","span","_l","key","offset","icon","on","click","src","justify-content","$event","margin-left","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/40.3feb0be91b9aa8de5fec.js","sourcesContent":["<template>\n    <div style=\"\">\n        <div style=\"background: #FFF;padding: 2vh 2vw;margin-bottom: 10vh;\">\n            <div style=\"font-size: 30px;color: #1C2023;text-align: center;\">添加发票</div>\n\n            <div style=\"border: 1px solid #F8F8FF;padding: 2vw;margin-top: 2vh\">\n\n                <el-upload :on-change=\"change\" action=\"\" :show-file-list=\"false\" :auto-upload=\"false\">\n                    <el-button type=\"warning\">点击上传</el-button>\n                </el-upload>\n\n                <div style=\"border-bottom: 1px solid rgba(96,105,114,0.3);margin: 3vh 0\"></div>\n\n                <el-form ref=\"form\" :model=\"form\" label-width=\"150px\" :rules=\"rules\">\n                    <div style=\"display: flex;flex-wrap: wrap\">\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"发票类型：\" prop=\"invoiceType\">\n                                <el-select v-model=\"form.invoiceType\" placeholder=\"请选择\" style=\"width: 100%;\">\n                                    <el-option label=\"专票\" value=\"0\"></el-option>\n                                    <el-option label=\"普票\" value=\"1\"></el-option>\n                                </el-select>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"开票日期：\" prop=\"invoicingDate\">\n                                <el-date-picker style=\"width: 100%;\" type=\"date\" placeholder=\"\" v-model=\"form.invoicingDate\" value-format=\"yyyy-MM-dd\"></el-date-picker>\n\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"认证日期：\">\n                                <el-date-picker style=\"width: 100%;\" type=\"date\" placeholder=\"\" v-model=\"form.authenticationDate\" value-format=\"yyyy-MM-dd\"></el-date-picker>\n\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"发票号码：\" prop=\"invoiceNumber\">\n                                <el-input v-model=\"form.invoiceNumber\" style=\"width: 100%;\"></el-input>\n                            </el-form-item>\n                        </div>\n\n                        <div style=\"width: 100%;display: flex;flex-wrap: wrap\">\n                            <div style=\"width: 350px;\">\n                                <el-form-item label=\"供应商/客户类型：\" prop=\"supplierType\">\n                                    <el-select v-model=\"form.supplierType\" placeholder=\"请选择\" style=\"width: 100%;\">\n                                        <el-option label=\"供应商\" value=\"供应商\"></el-option>\n                                        <el-option label=\"客户\" value=\"客户\"></el-option>\n                                    </el-select>\n\n                                </el-form-item>\n                            </div>\n                            <div style=\"width: 440px;\">\n                                <el-col :span=\"19\">\n                                    <el-form-item label=\"供应商/客户名称：\" prop=\"supplierName\">\n                                        <el-select v-model=\"form.supplierName\" placeholder=\"请选择\" style=\"width: 100%;\">\n                                            <el-option v-for=\"item in list\" :key=\"item.company_supplier_name\" :label=\"item.company_supplier_name\" :value=\"item.company_supplier_name\"></el-option>\n                                        </el-select>\n                                    </el-form-item>\n                                </el-col>\n                                <el-col :span=\"3\" :offset=\"1\">\n                                    <el-button @click=\"add_huoban\" type=\"\" icon=\"el-icon-plus\"></el-button>\n\n                                </el-col>\n\n\n                            </div>\n                            <!--<div style=\"margin-left: 20px\" v-if=\"$route.query.from.split('_')[0] == 'fapiaoguanli'\">-->\n\n                            <!--</div>-->\n                        </div>\n\n\n\n\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"金额：\" prop=\"money\">\n                                <el-input v-model=\"form.money\" style=\"width: 100%;\"></el-input>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"税率：\" prop=\"taxRate\">\n                                <el-input v-model=\"form.taxRate\" style=\"width: 100%;\"></el-input>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"价税合计：\" prop=\"priceTaxTotal\">\n                                <el-input v-model=\"form.priceTaxTotal\" style=\"width: 100%;\"></el-input>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"元\" label-width=\"30px\">\n                            </el-form-item>\n                        </div>\n                    </div>\n                </el-form>\n\n                <div style=\"border-bottom: 1px solid rgba(96,105,114,0.3);\"></div>\n\n                <div style=\"margin: 3vh\">\n                    <img :src=\"form.invoicePhoto\" style=\"width: 300px;\">\n                </div>\n\n                <!--凭证管理他们的保存-->\n                <div style=\"display: flex;justify-content: center;margin-top: 5vh;\" v-if=\"$route.query.from.split('_')[0] == 'pingzhengguanli'\">\n                    <el-button type=\"warning\"  @click=\"submitForm_pingzheng('form')\">保存</el-button>\n                    <el-button type=\"info\" style=\"margin-left: 5vw\" @click=\"cancel_pingzheng\">返回</el-button>\n                </div>\n\n                <!--流水管理他们的保存-->\n                <div style=\"display: flex;justify-content: center;margin-top: 5vh;\" v-if=\"$route.query.from.split('_')[0] == 'liushuiguanli'\">\n                    <el-button type=\"warning\"  @click=\"submitForm_liushui('form')\">保存</el-button>\n                    <el-button type=\"info\" style=\"margin-left: 5vw\" @click=\"$router.go(-1)\">返回</el-button>\n                </div>\n\n                <!--发票管理他们的保存-->\n                <div style=\"\" v-if=\"$route.query.from.split('_')[0] == 'fapiaoguanli'\">\n                    <el-button type=\"warning\"  @click=\"tianjiapingzheng('form',0)\">生成凭证</el-button>\n                    <el-button type=\"warning\"  @click=\"tianjiapingzheng('form',1)\">生成凭证和流水</el-button>\n                    <el-button type=\"warning\"  @click=\"pipeixianyoupingzheng('form')\">匹配至现有凭证</el-button>\n                    <el-button type=\"warning\"  @click=\"pipeixianyouliushui('form')\">匹配至现有流水</el-button>\n                </div>\n                <div style=\"margin-top: 3vh\" v-if=\"$route.query.from.split('_')[0] == 'fapiaoguanli'\">\n                    <el-button type=\"warning\"  @click=\"submitForm_fapiaoguanli('form')\">仅保存</el-button>\n                    <!--<el-button type=\"warning\"  @click=\"submitForm2('form')\">保存</el-button>-->\n                    <el-button type=\"info\" style=\"\" @click=\"$router.push({path:'/home/fapiao/fapiaoguanli'})\">取消</el-button>\n                </div>\n            </div>\n            <addHuoBan v-if=\"show_huoban\" @add_huoban_ok = \"add_huoban_ok\"></addHuoBan>\n\n        </div>\n\n\n    </div>\n</template>\n\n<script>\n    import mix from \"@/mixins/mixins\"\n    import OSS from 'ali-oss'\n    import addHuoBan from \"@/components/yuchunhui/add_yewuhuoban\"\n\n    export default {\n        name: \"xianjinliuliangbiao\",\n        mixins:[mix],\n        data() {\n            return {\n                show_huoban:false,\n                // 先赋值给这个再赋值给form的这个\n                invoicePhoto1:\"\",\n                // 第二个请选择\n                list:[],\n                form:{\n                    // 发票类型\n                    invoiceType:'',\n                    // 开票日期\n                    invoicingDate:'',\n                    // 认证日期\n                    authenticationDate:'',\n                    // 发票号码\n                    invoiceNumber:'',\n                    // 供应商或客户\n                    supplierType:\"\",\n                    // 供应商或客户的名字\n                    supplierName:'',\n                    // 金额\n                    money:'',\n                    // 税率\n                    taxRate:'',\n                    // 价税合计\n                    priceTaxTotal:'',\n                    // 图片\n                    invoicePhoto:\"\"\n                },\n                rules: {\n                    invoiceType: [\n                        { required: true, message: '请选择发票类型', trigger: 'change' },\n                    ],\n                    invoicingDate: [\n                        { required: true, message: '请选择开票日期', trigger: 'change' }\n                    ],\n                    invoiceNumber:[\n                        { required: true, message: '请输入发票号码', trigger: 'blur' }\n                    ],\n                    supplierType:[\n                        { required: true, message: '请选择供应商或客户', trigger: 'change' }\n                    ],\n                    supplierName:[\n                        { required: true, message: '请选择', trigger: 'change' }\n                    ],\n                    supplierType:[\n                        { required: true, message: '请选择供应商或客户', trigger: 'change' }\n                    ],\n                    money:[\n                        { required: true, message: '请输入金额', trigger: 'blur' }\n                    ],\n                    taxRate:[\n                        { required: true, message: '请输入税率', trigger: 'blur' }\n                    ],\n                    priceTaxTotal:[\n                        { required: true, message: '请选择价税合计', trigger: 'blur' }\n                    ],\n                },\n            }\n        },\n        components:{\n            addHuoBan\n        },\n        mounted(){\n            this.getStorage()\n            this._ajax('userAccounts/selectCompanySupplierName',{\n                company_supplier_name:'',\n                uuid:this.uuid,\n                workAccountId:this.accountId,\n            }, msg => {\n                this.list = msg\n                // this._message(1,\"业务伙伴成功\")\n                // 如果缓存里有发票信息显示但是从左边列表点进来就不显示有的话再删除\n                if(this.$route.query.from == 'fapiaoguanli' && !this.$route.query.no_show_storage){\n                    if(sessionStorage.getItem('tianjiafapiao_data')){\n                        this.form = JSON.parse(sessionStorage.getItem(\"tianjiafapiao_data\"))\n                    }\n                }\n                if(this.$route.query.from == 'fapiaoguanli' && this.$route.query.no_show_storage){\n                    if(sessionStorage.getItem('tianjiafapiao_data')){\n                        sessionStorage.removeItem(\"tianjiafapiao_data\")\n                    }\n                }\n            })\n        },\n        methods: {\n            add_huoban_ok(x){\n                if(x == 1){\n                    this._ajax('userAccounts/selectCompanySupplierName',{\n                        company_supplier_name:'',\n                        uuid:this.uuid,\n                        workAccountId:this.accountId,\n                    }, msg => {\n                        this.list = msg\n                        this.show_huoban = false\n                    })\n                }else{\n                    this.show_huoban = false\n\n                }\n\n            },\n            add_huoban(){\n                this.show_huoban = true\n                // this.$router.push({path: '/home/gongyingshangkehu/add_set',query:{type:'add'}})\n            },\n            // 凭证管理进来的保存\n            submitForm_pingzheng(formName) {\n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                        // 凭证管理-修改\n                        if(this.$route.query.from == \"pingzhengguanli_xiugai\"){\n                            sessionStorage.setItem(\"fapiao\",JSON.stringify(this.form))\n                            sessionStorage.setItem(\"type1\",\"shangchuan_fapiao\")\n                            this.$router.push({path:\"/home/pingzhengguanli/editor_pingzheng\",query:{certificateUuid:this.$route.query.certificateUuid}})\n                        }\n                        //凭证管理\n                        if(this.$route.query.from == 'pingzhengguanli'){\n                            this._ajax('userAccounts/addCertificateInvoice',{\n                                uuid:this.uuid,\n                                workAccountId:this.accountId,\n                                type1:1,\n                                ...this.form,\n                                certificateUuid:this.$route.query.certificateUuid\n                            }, msg => {\n                                this._message(1,\"保存成功\")\n                                this.$router.push({path: '/home/pingzhengguanli/pingzhengguanli'})\n                            })\n                        }\n                        // 凭证管理-添加凭证\n                        if(this.$route.query.from == \"pingzhengguanli_tianjiapingzheng\"){\n                            sessionStorage.setItem(\"fapiao\",JSON.stringify(this.form))\n                            sessionStorage.setItem(\"type1\",\"shangchuan_fapiao\")\n                            this.$router.push(\"/home/pingzhengguanli/add_pingzheng\")\n                        }\n\n                        // 如果是记账过来的(???)\n                        if(this.$route.query.type == \"jizhang_add\"){\n                            localStorage.setItem(\"fapiao\",JSON.stringify(this.form))\n                            localStorage.setItem(\"type1\",0)\n                        }\n                        // this.$router.push({path: '/home/pingzhengguanli/add_pingzheng'})\n                    } else {\n                        console.log('error submit!!');\n                        return false;\n                    }\n                });\n            },\n            cancel_pingzheng(){\n                // 添加凭证进来的返回\n                if(this.$route.query.from == \"pingzhengguanli_tianjiapingzheng\"){\n                    this.$router.push(\"/home/pingzhengguanli/add_pingzheng\")\n                }\n                // 凭证管理进来的\n                if(this.$route.query.from == \"pingzhengguanli\"){\n                    this.$router.push(\"/home/pingzhengguanli/pingzhengguanli\")\n                }\n                // 凭证管理的修改进来的\n                if(this.$route.query.from == \"pingzhengguanli_xiugai\"){\n                    this.$router.push({path:\"/home/pingzhengguanli/editor_pingzheng\",query:{certificateUuid:this.$route.query.certificateUuid}})\n                }\n            },\n\n            // 发票管理的保存\n            // submitForm2(formName) {\n            //     this.$refs[formName].validate((valid) => {\n            //         if (valid) {\n            //             // 如果只保存发票\n            //             if(!localStorage.getItem(\"liushui_pingzheng\") &&!localStorage.getItem(\"pipei_liushui\") && !localStorage.getItem(\"pipei_pingzheng\")){\n            //                 this._ajax('userAccounts/addUserInvoice',{\n            //                     uuid:this.uuid,\n            //                     workAccountId:this.accountId,\n            //                     ...this.form\n            //                 }, msg => {\n            //                     this._message(1,\"仅保存发票成功\")\n            //                     this.$router.push({path:\"/home/fapiao/fapiaoguanli\"})\n            //                     localStorage.removeItem('tianjiafapiao_data');\n            //\n            //                 })\n            //             }\n            //             // 如果匹配现有流水\n            //             if(localStorage.getItem(\"pipei_liushui\") && !localStorage.getItem(\"pipei_pingzheng\")){\n            //                 this._ajax('userAccounts/addFlowingWaterInvoice',{\n            //                     uuid:this.uuid,\n            //                     workAccountId:this.accountId,\n            //                     ...this.form,\n            //                     type1:2,\n            //                     accountingId:JSON.parse(localStorage.getItem(\"pipei_liushui\"))\n            //                 }, msg => {\n            //                     this._message(1,\"保存现有流水成功\")\n            //                     localStorage.removeItem('pipei_liushui');\n            //                     localStorage.removeItem('pipei_tianjiafapiao_data');\n            //                     this.$router.push({path:\"/home/fapiao/fapiaoguanli\"})\n            //                     localStorage.removeItem('tianjiafapiao_data');\n            //\n            //\n            //\n            //                 })\n            //             }\n            //             // 如果匹配现有凭证\n            //             if(!localStorage.getItem(\"pipei_liushui\") && localStorage.getItem(\"pipei_pingzheng\")){\n            //                 this._ajax('userAccounts/addCertificateInvoice',{\n            //                     uuid:this.uuid,\n            //                     workAccountId:this.accountId,\n            //                     ...this.form,\n            //                     type1:1,\n            //                     certificateUuid  :JSON.parse(localStorage.getItem(\"pipei_pingzheng\"))\n            //                 }, msg => {\n            //                     this._message(1,\"保存现有凭证成功\")\n            //                     localStorage.removeItem('pipei_pingzheng');\n            //                     localStorage.removeItem('tianjiafapiao_data');\n            //                     this.$router.push({path:\"/home/fapiao/fapiaoguanli\"})\n            //\n            //\n            //                 })\n            //             }\n            //             // 匹配了现有流水和凭证\n            //             if(localStorage.getItem(\"pipei_liushui\") && localStorage.getItem(\"pipei_pingzheng\")){\n            //                 this._ajax('userAccounts/addFlowingWaterInvoiceCertificate',{\n            //                     uuid:this.uuid,\n            //                     workAccountId:this.accountId,\n            //                     ...this.form,\n            //                     type1:4,\n            //                     accountingId:JSON.parse(localStorage.getItem(\"pipei_liushui\")),\n            //                     certificateUuid  :JSON.parse(localStorage.getItem(\"pipei_pingzheng\"))\n            //                 }, msg => {\n            //                     this._message(1,\"保存现有流水和现有凭证成功\")\n            //                     localStorage.removeItem('pipei_pingzheng');\n            //                     localStorage.removeItem('pipei_liushui');\n            //                     localStorage.removeItem('tianjiafapiao_data');\n            //                     this.$router.push({path:\"/home/fapiao/fapiaoguanli\"})\n            //\n            //                 })\n            //             }\n            //             // 如果不是匹配流水或者凭证\n            //             if(localStorage.getItem(\"liushui_pingzheng\")){\n            //                 if(JSON.parse(localStorage.getItem(\"liushui_pingzheng\")).checked){\n            //                     this._ajax('userAccounts/addFlowingWaterInvoiceCertificate',{\n            //                         uuid:this.uuid,\n            //                         workAccountId:this.accountId,\n            //                         ...JSON.parse(localStorage.getItem(\"liushui_pingzheng\")),\n            //                         ...this.form,\n            //                         type1:0\n            //                     }, msg => {\n            //                         this._message(1,\"保存发票流水凭证成功\")\n            //                         localStorage.removeItem('liushhui_pingzheng');\n            //                         localStorage.removeItem('tianjiafapiao_data');\n            //                         this.$router.push({path:\"/home/fapiao/fapiaoguanli\"})\n            //\n            //                     })\n            //                 }else{\n            //                     this._ajax('userAccounts/addCertificateInvoice',{\n            //                         uuid:this.uuid,\n            //                         workAccountId:this.accountId,\n            //                         ...JSON.parse(localStorage.getItem(\"liushui_pingzheng\")),\n            //                         ...this.form,\n            //                         type1:0\n            //                     }, msg => {\n            //                         this._message(1,\"保存发票凭证成功\")\n            //                         localStorage.removeItem('liushhui_pingzheng');\n            //                         localStorage.removeItem('tianjiafapiao_data');\n            //\n            //                         this.$router.push({path:\"/home/fapiao/fapiaoguanli\"})\n            //\n            //                     })\n            //                 }\n            //             }\n            //\n            //         } else {\n            //             console.log('error submit!!');\n            //             return false;\n            //         }\n            //     });\n            // },\n            // 发票管理的仅保存\n\n            // 发票管理的保存\n            submitForm_fapiaoguanli(formName) {\n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                        this._ajax('userAccounts/addUserInvoice',{\n                            uuid:this.uuid,\n                            workAccountId:this.accountId,\n                            ...this.form\n                        }, msg => {\n                            this._message(1,\"仅保存成功\")\n                            this.$router.push({path:\"/home/fapiao/fapiaoguanli\"})\n                            // localStorage.removeItem('tianjiafapiao_data');\n                        })\n                    } else {\n                        console.log('error submit!!');\n                        return false;\n                    }\n                });\n            },\n            // 生成凭证和流水\n            tianjiapingzheng(formName,type){\n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                        if(type == 0){\n                            sessionStorage.setItem('tianjiafapiao_data',JSON.stringify(this.form))\n                            this.$router.push({path: \"/home/fapiao/tianjiapingzheng\",query:{checked:\"false\"}})\n                        }else{\n                            sessionStorage.setItem('tianjiafapiao_data',JSON.stringify(this.form))\n                            this.$router.push({path: \"/home/fapiao/tianjiapingzheng\",query:{checked:\"true\"}})\n                        }\n\n                    } else {\n                        console.log('error submit!!');\n                        return false;\n                    }\n                });\n\n            },\n            pipeixianyoupingzheng(formName){\n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                        sessionStorage.setItem('tianjiafapiao_data',JSON.stringify(this.form))\n                        this.$router.push({path: \"/home/fapiao/pipeixianyoupingzheng\",query:{'from':'tianjiafapiao'}})\n                    } else {\n                        console.log('error submit!!');\n                        return false;\n                    }\n                });\n\n            },\n            pipeixianyouliushui(formName){\n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                        sessionStorage.setItem('tianjiafapiao_data',JSON.stringify(this.form))\n                        this.$router.push({path: \"/home/fapiao/pipeixianyouliushui\",query:{'from':'tianjiafapiao'}})\n                    } else {\n                        console.log('error submit!!');\n                        return false;\n                    }\n                });\n\n            },\n\n\n            // 流水管理的保存\n            submitForm_liushui(formName) {\n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                        // 流水管理进来的\n                        if(this.$route.query.from == \"liushuiguanli\"){\n                            this._ajax('userAccounts/addFlowingWaterInvoice',{\n                                uuid:this.uuid,\n                                workAccountId:this.accountId,\n                                type1:2,\n                                accountingId:this.$route.query.accountingId,\n                                ...this.form\n                            }, msg => {\n                                this._message(1,\"保存成功\")\n                                this.$router.go(-1)\n                            })\n                        }\n                        // 如果是记账过来的\n                        // if(this.$route.query.from == \"liushuiguanli_jizhang\"){\n                        //     sessionStorage.setItem(\"fapiao\",JSON.stringify(this.form))\n                        //     sessionStorage.setItem(\"type1\",\"shangchuan_fapiao\")\n                        //     this.$router.go(-1)\n                        // }\n                    } else {\n                        console.log('error submit!!');\n                        return false;\n                    }\n                });\n            },\n            // 上传文件\n            change (file) {\n                var a = this.$message({\n                    type:\"warning\",\n                    message:'发票识别中请稍后',\n                    duration:0\n                })\n                function blobToDataURL(blob, callback) {\n                    var a = new FileReader();\n                    a.onload = function (e) { callback(e.target.result); }\n                    a.readAsDataURL(blob);\n                }\n                blobToDataURL(file.raw,  (dataurl)=> {\n                    // this.form.invoicePhoto = dataurl\n                    this._ajax('common/invoice',{\n                        encode:JSON.stringify(dataurl.split(\",\")[1])\n                    }, msg => {\n\n\n                        a.close()\n\n                        this._message(1,\"识别成功\")\n                        this.form.invoicePhoto = this.invoicePhoto1\n\n                        this.form.invoiceId = msg.kind\n                        this.form.invoiceNumber = msg.number\n                        this.form.priceTaxTotal = msg.total\n                        this.form.money = msg.pretax_amount\n                        // 供生成使用\n                        this.form.a = msg.tax\n\n                        // 税率\n                        this.form.taxRate = (((msg.tax/msg.pretax_amount).toFixed(2))*100)+ '%'\n\n                        let x = \"\"\n                        msg.date.split(\"\").forEach((item,index)=>{\n                            if(item == \"年\" || item == \"月\" || item ==\"日\"){\n                                if(index != (msg.date.split(\"\").length)-1){\n                                    x+=\"-\"\n\n                                }\n\n                            }else{\n                                x+=item\n                            }\n                        })\n                        this.form.invoicingDate = x\n                    })\n\n                });\n\n\n                var _this = this;\n                if (file == undefined) {\n                    return false;\n                }\n                var fName = file.name,\n                    suffix = fName.substr(fName.lastIndexOf(\".\")),\n                    nda = 'user-herder' + Date.parse(new Date()) / 1000,\n                    storeAs = nda + suffix;\n                console.log(file)\n\n                console.log(storeAs)\n                var client = new OSS.Wrapper(this.$ali);\n                client.multipartUpload(storeAs, file.raw).then(function (result) {\n                    console.log(result.res.requestUrls[0])\n                    _this.invoicePhoto1 = result.res.requestUrls[0].split('?')[0];\n                    // _this.$message({\n                    //     message: '上传成功',\n                    //     type: 'success'\n                    // });\n\n                }).catch(function (err) {\n                    console.log(err);\n                    _this.$message({\n                        message: '服务器繁忙，请稍后再试',\n                        type: 'error'\n                    });\n                });\n\n            },\n\n        },\n    }\n</script>\n\n<style>\n\n\n    .r{\n        width: 100%;\n        text-align: right;\n        margin-top: 3vh;\n    }\n    .l{\n        width: 100%;\n        text-align: left;\n        margin-top: 3vh;\n        margin-left: 1vw;\n    }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/pingzhengguanli/xinzengfapiao.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_c('div',{staticStyle:{\"background\":\"#FFF\",\"padding\":\"2vh 2vw\",\"margin-bottom\":\"10vh\"}},[_c('div',{staticStyle:{\"font-size\":\"30px\",\"color\":\"#1C2023\",\"text-align\":\"center\"}},[_vm._v(\"添加发票\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"border\":\"1px solid #F8F8FF\",\"padding\":\"2vw\",\"margin-top\":\"2vh\"}},[_c('el-upload',{attrs:{\"on-change\":_vm.change,\"action\":\"\",\"show-file-list\":false,\"auto-upload\":false}},[_c('el-button',{attrs:{\"type\":\"warning\"}},[_vm._v(\"点击上传\")])],1),_vm._v(\" \"),_c('div',{staticStyle:{\"border-bottom\":\"1px solid rgba(96,105,114,0.3)\",\"margin\":\"3vh 0\"}}),_vm._v(\" \"),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"150px\",\"rules\":_vm.rules}},[_c('div',{staticStyle:{\"display\":\"flex\",\"flex-wrap\":\"wrap\"}},[_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"发票类型：\",\"prop\":\"invoiceType\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.invoiceType),callback:function ($$v) {_vm.$set(_vm.form, \"invoiceType\", $$v)},expression:\"form.invoiceType\"}},[_c('el-option',{attrs:{\"label\":\"专票\",\"value\":\"0\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"普票\",\"value\":\"1\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"开票日期：\",\"prop\":\"invoicingDate\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"placeholder\":\"\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.form.invoicingDate),callback:function ($$v) {_vm.$set(_vm.form, \"invoicingDate\", $$v)},expression:\"form.invoicingDate\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"认证日期：\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"placeholder\":\"\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.form.authenticationDate),callback:function ($$v) {_vm.$set(_vm.form, \"authenticationDate\", $$v)},expression:\"form.authenticationDate\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"发票号码：\",\"prop\":\"invoiceNumber\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.form.invoiceNumber),callback:function ($$v) {_vm.$set(_vm.form, \"invoiceNumber\", $$v)},expression:\"form.invoiceNumber\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"100%\",\"display\":\"flex\",\"flex-wrap\":\"wrap\"}},[_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"供应商/客户类型：\",\"prop\":\"supplierType\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.supplierType),callback:function ($$v) {_vm.$set(_vm.form, \"supplierType\", $$v)},expression:\"form.supplierType\"}},[_c('el-option',{attrs:{\"label\":\"供应商\",\"value\":\"供应商\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"客户\",\"value\":\"客户\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"440px\"}},[_c('el-col',{attrs:{\"span\":19}},[_c('el-form-item',{attrs:{\"label\":\"供应商/客户名称：\",\"prop\":\"supplierName\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.supplierName),callback:function ($$v) {_vm.$set(_vm.form, \"supplierName\", $$v)},expression:\"form.supplierName\"}},_vm._l((_vm.list),function(item){return _c('el-option',{key:item.company_supplier_name,attrs:{\"label\":item.company_supplier_name,\"value\":item.company_supplier_name}})}),1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3,\"offset\":1}},[_c('el-button',{attrs:{\"type\":\"\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.add_huoban}})],1)],1)]),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"金额：\",\"prop\":\"money\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.form.money),callback:function ($$v) {_vm.$set(_vm.form, \"money\", $$v)},expression:\"form.money\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"税率：\",\"prop\":\"taxRate\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.form.taxRate),callback:function ($$v) {_vm.$set(_vm.form, \"taxRate\", $$v)},expression:\"form.taxRate\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"价税合计：\",\"prop\":\"priceTaxTotal\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.form.priceTaxTotal),callback:function ($$v) {_vm.$set(_vm.form, \"priceTaxTotal\", $$v)},expression:\"form.priceTaxTotal\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"元\",\"label-width\":\"30px\"}})],1)])]),_vm._v(\" \"),_c('div',{staticStyle:{\"border-bottom\":\"1px solid rgba(96,105,114,0.3)\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin\":\"3vh\"}},[_c('img',{staticStyle:{\"width\":\"300px\"},attrs:{\"src\":_vm.form.invoicePhoto}})]),_vm._v(\" \"),(_vm.$route.query.from.split('_')[0] == 'pingzhengguanli')?_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\",\"margin-top\":\"5vh\"}},[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){return _vm.submitForm_pingzheng('form')}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"5vw\"},attrs:{\"type\":\"info\"},on:{\"click\":_vm.cancel_pingzheng}},[_vm._v(\"返回\")])],1):_vm._e(),_vm._v(\" \"),(_vm.$route.query.from.split('_')[0] == 'liushuiguanli')?_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\",\"margin-top\":\"5vh\"}},[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){return _vm.submitForm_liushui('form')}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"5vw\"},attrs:{\"type\":\"info\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"返回\")])],1):_vm._e(),_vm._v(\" \"),(_vm.$route.query.from.split('_')[0] == 'fapiaoguanli')?_c('div',{},[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){return _vm.tianjiapingzheng('form',0)}}},[_vm._v(\"生成凭证\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){return _vm.tianjiapingzheng('form',1)}}},[_vm._v(\"生成凭证和流水\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){return _vm.pipeixianyoupingzheng('form')}}},[_vm._v(\"匹配至现有凭证\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){return _vm.pipeixianyouliushui('form')}}},[_vm._v(\"匹配至现有流水\")])],1):_vm._e(),_vm._v(\" \"),(_vm.$route.query.from.split('_')[0] == 'fapiaoguanli')?_c('div',{staticStyle:{\"margin-top\":\"3vh\"}},[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){return _vm.submitForm_fapiaoguanli('form')}}},[_vm._v(\"仅保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":function($event){return _vm.$router.push({path:'/home/fapiao/fapiaoguanli'})}}},[_vm._v(\"取消\")])],1):_vm._e()],1),_vm._v(\" \"),(_vm.show_huoban)?_c('addHuoBan',{on:{\"add_huoban_ok\":_vm.add_huoban_ok}}):_vm._e()],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-35640419\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/pingzhengguanli/xinzengfapiao.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-35640419\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./xinzengfapiao.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./xinzengfapiao.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./xinzengfapiao.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-35640419\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./xinzengfapiao.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/pingzhengguanli/xinzengfapiao.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}