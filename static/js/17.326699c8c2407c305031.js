webpackJsonp([17],{kLAT:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("4YfN"),n=a.n(i),o={name:"xianjinliuliangbiao",mixins:[a("IfhF").a],data:function(){return{id:"",tableData:[],total:0,dangqianye:1,pageSize:10,form:{name:"",timeMonth:(new Date).getFullYear()+"-"+(Array(2).join(0)+(Number((new Date).getMonth())+1)).slice(-2),startMoney:"",endMoney:"",certificateAbstract:"",accountantSubject:""}}},mounted:function(){this.getStorage(),this.list()},methods:{search:function(){this.dangqianye=1,this.list()},list:function(){var t=this;this._ajax("userAccounts/selectNoCertificate",n()({uuid:this.uuid,workAccountId:this.accountId,page:this.dangqianye,pageSize:this.pageSize},this.form),function(e){var a,i=[];e.PageInfo.list.forEach(function(t){var e=!0;i.forEach(function(a,n){i[n].id!=t.certificate_uuid||(e=!1)}),e&&i.push({id:t.certificate_uuid,list:[]})}),e.PageInfo.list.forEach(function(t){i.forEach(function(e){t.certificate_uuid==e.id&&e.list.push(t)})}),i.forEach(function(t){t.time=t.list[0].creationTime,t.code=t.list[0].certificate_number}),t.tableData=i,t.tableData.sort((a="code",function(t,e){return t[a]-e[a]})),t.total=i.length})},save:function(){var t=this;if(""!=this.id){if("fapiaoguanli"==this.$route.query.from&&this._ajax("userAccounts/updateAccountFlag",{uuid:this.uuid,workAccountId:this.accountId,invoiceId:this.$route.query.invoiceId,certificateUuid:this.id},function(e){t._message(1,"保存成功"),t.$router.push({path:"/home/fapiao/fapiaoguanli"})}),"tianjiafapiao"==this.$route.query.from){if(""==this.id)return void this._message(2,"请至少选择一个");this._ajax("userAccounts/addCertificateInvoice",n()({uuid:this.uuid,workAccountId:this.accountId},JSON.parse(sessionStorage.getItem("tianjiafapiao_data")),{type1:1,certificateUuid:this.id}),function(e){t._message(1,"保存成功"),sessionStorage.removeItem("tianjiafapiao_data"),t.$router.push({path:"/home/fapiao/fapiaoguanli"})})}}else this._message(2,"请至少选择一项")},arraySpanMethod:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;if(0===e)return 1==a||2==a||3==a?[0,0]:[1,4]},tableRowClassName:function(t){t.row;return t.rowIndex%2!=0?"lan":""},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.pageSize=t,this.list()},handleCurrentChange:function(t){console.log("当前页: "+t),this.dangqianye=t,this.list()}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{background:"#FFF",padding:"2vh 2vw","margin-bottom":"8vh"}},[a("div",{staticStyle:{"font-size":"30px",color:"#1C2023","text-align":"center"}},[t._v("匹配凭证")]),t._v(" "),a("div",{staticStyle:{border:"1px solid #F8F8FF",padding:"2vh 2vw","margin-top":"2vh"}},[a("div",{staticStyle:{"overflow-x":"auto",width:"100%","white-space":"nowrap"}},[a("el-form",{staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{inline:!0,model:t.form}},[a("el-form-item",{attrs:{label:"摘要："}},[a("el-input",{attrs:{placeholder:""},model:{value:t.form.certificateAbstract,callback:function(e){t.$set(t.form,"certificateAbstract",e)},expression:"form.certificateAbstract"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"科目："}},[a("el-input",{attrs:{placeholder:""},model:{value:t.form.accountantSubject,callback:function(e){t.$set(t.form,"accountantSubject",e)},expression:"form.accountantSubject"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"金额："}},[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:""},model:{value:t.form.startMoney,callback:function(e){t.$set(t.form,"startMoney",e)},expression:"form.startMoney"}})],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[t._v("至")]),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:""},model:{value:t.form.endMoney,callback:function(e){t.$set(t.form,"endMoney",e)},expression:"form.endMoney"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"warning"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{"value-format":"yyyy-MM",type:"month",placeholder:"选择"},model:{value:t.form.timeMonth,callback:function(e){t.$set(t.form,"timeMonth",e)},expression:"form.timeMonth"}})],1)],1)],1),t._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"",label:"单选",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{attrs:{label:e.row.id},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}},[t._v(" ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.list,"show-summary":!0}},[a("el-table-column",{attrs:{prop:"certificate_abstract",label:"摘要",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"accountant_subject",label:"科目",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"total_debit_money",label:"借方金额",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"total_credit_money",label:"贷方金额",width:""}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"生成时间",prop:"time"}}),t._v(" "),a("el-table-column",{attrs:{label:"凭证字号",prop:"code"}})],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"1vh"}},[a("el-pagination",{attrs:{"current-page":t.dangqianye,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"2vh"}},[a("el-button",{attrs:{type:"warning"},on:{click:t.save}},[t._v("保存")]),t._v(" "),"fapiaoguanli"==t.$route.query.from?a("el-button",{staticStyle:{"margin-left":"3vw"},attrs:{type:"info"},on:{click:function(e){return t.$router.push({path:"/home/fapiao/fapiaoguanli"})}}},[t._v("返回")]):t._e(),t._v(" "),"tianjiafapiao"==t.$route.query.from?a("el-button",{staticStyle:{"margin-left":"3vw"},attrs:{type:"info"},on:{click:function(e){return t.$router.push({path:"/home/pingzhengguanli/xinzengfapiao",query:{from:"fapiaoguanli"}})}}},[t._v("返回")]):t._e()],1)])])},staticRenderFns:[]};var l=a("C7Lr")(o,r,!1,function(t){a("t2q0")},null,null);e.default=l.exports},t2q0:function(t,e){}});
//# sourceMappingURL=17.326699c8c2407c305031.js.map