{"version":3,"sources":["webpack:///src/pages/pingzhengguanli/editor_pingzheng.vue","webpack:///./src/pages/pingzhengguanli/editor_pingzheng.vue?15ee","webpack:///./src/pages/pingzhengguanli/editor_pingzheng.vue","webpack:///src/components/yuchunhui/add_fapiao.vue","webpack:///./src/components/yuchunhui/add_fapiao.vue?11db","webpack:///./src/components/yuchunhui/add_fapiao.vue"],"names":["editor_pingzheng","name","mixins","components","addFaPiao","add_fapiao","pingzheng","add_pingzheng","data","guding_form","fapiaozujian_kaiguan","yaoxinxi","fanxian","flag1","flag2","form","code","date","user","tableData","dialogVisible","tableData1","id","page","pageSize","total","mounted","_this","this","getStorage","_ajax","uuid","workAccountId","accountId","certificateUuid","$route","query","msg","certificate_number","creationTime","x","forEach","item","index","y","zhaiyao","certificate_abstract","jie","dai","jie_show","dai_show","accountant_subject","includes","split","accountant_code","total_credit_money","total_debit_money","push","length","methods","geiguding","$store","state","gdzc","tiqu_ok_guding","_this2","certificateAbstract","debitMoney","creditMoney","subject","sessionStorage","getItem","extends_default","JSON","parse","certificateNumber","time","type1","type2","_message","clear","$router","invoiceId","ok","isNaN","Number","Date","getTime","cancel","go","geixinxi","tiqu_ok","_this3","removeItem","pingzhengzihao","_this4","number","congxianyoupiaojuxuanze","list_bind","_this5","PageInfo","list","handleSizeChange","val","console","log","handleCurrentChange","dangqianye","dialogVisible_ok","setItem","stringify_default","pingzhengguanli_editor_pingzheng","render","_vm","_h","$createElement","_c","_self","staticStyle","background","padding","font-size","color","text-align","_v","border","margin-top","display","justify-content","align-items","staticClass","attrs","inline","model","label","placeholder","value","callback","$$v","$set","expression","type","value-format","on","change","click","$event","margin-left","title","visible","close-on-press-escape","close-on-click-modal","update:visible","prop","width","scopedSlots","_u","key","fn","scope","row","current-page","page-sizes","page-size","layout","size-change","current-change","slot","fapiaozujian","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","addHuoBan","add_yewuhuoban","company_supplier_name","_rules","show_huoban","invoicePhoto1","invoiceType","invoicingDate","authenticationDate","invoiceNumber","supplierType","supplierName","money","taxRate","priceTaxTotal","invoicePhoto","rules","required","message","trigger","defineProperty_default","show_huoban_ok_cancel","submitForm","formName","$refs","validate","valid","$emit","file","$message","duration","reader","FileReader","readAsDataURL","raw","onload","encode","result","close","Object","prototype","toString","call","hasOwnProperty","pretax_amount","tax","toFixed","undefined","fName","suffix","substr","lastIndexOf","storeAs","browser_default","a","Wrapper","$ali","multipartUpload","then","res","requestUrls","catch","err","yuchunhui_add_fapiao","show-close","margin-bottom","on-change","action","show-file-list","auto-upload","ref","label-width","flex-wrap","span","_l","offset","icon","add_huoban_ok"],"mappings":"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","file":"static/js/5.dc9ea9d8042723ce9bd6.js","sourcesContent":["<template>\r\n    <div>\r\n        <div style=\"background: #FFF;padding: 2vh 2vw;\">\r\n            <div style=\"font-size: 30px;color: #1C2023;text-align: center;\">修改凭证</div>\r\n            <div style=\"border: 1px solid #F8F8FF;padding: 2vw;margin-top: 2vh\">\r\n                <!--上-->\r\n                <div style=\"display: flex;justify-content: space-between;align-items: flex-start;\">\r\n                    <div>\r\n                        <el-form :inline=\"true\" :model=\"form\" class=\"demo-form-inline\">\r\n                            <el-form-item label=\"凭证字号：\">\r\n                                <el-input v-model=\"form.code\" placeholder=\"\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"号\">\r\n                            </el-form-item>\r\n                            <el-form-item label=\"日期：\">\r\n                                <el-date-picker @change=\"pingzhengzihao\" type=\"date\" placeholder=\"\" v-model=\"form.date\" value-format=\"yyyy-MM-dd\"></el-date-picker>\r\n                            </el-form-item>\r\n                        </el-form>\r\n                    </div>\r\n                    <div>\r\n                        <el-button type=\"warning\" @click=\"fapiaozujian_kaiguan=true\">上传票据</el-button>\r\n                        <el-button type=\"warning\" @click=\"congxianyoupiaojuxuanze\">从现有票据选择</el-button>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <pingzheng :yaoxinxi=\"yaoxinxi\" @geixinxi=\"geixinxi\" :fanxian=\"fanxian\" type=\"editor_pingzheng\" @geiguding=\"geiguding\"></pingzheng>\r\n                <!--下-->\r\n                <div style=\"display: flex;justify-content: center;margin-top: 5vh;\">\r\n                    <el-button type=\"warning\" @click=\"ok()\">保存</el-button>\r\n                    <el-button type=\"info\" style=\"margin-left: 5vw\" @click=\"cancel\">返回</el-button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n        <!--从现有发票选择对话框-->\r\n        <el-dialog title=\"\" :visible.sync=\"dialogVisible\" :close-on-press-escape=\"false\" :close-on-click-modal=\"false\">\r\n            <el-table :data=\"tableData1\" >\r\n                <el-table-column\r\n                        prop=\"\"\r\n                        label=\"单选\"\r\n                        width=\"60\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-radio v-model=\"id\" :label=\"scope.row.id\">&nbsp;</el-radio>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"creation_time\"\r\n                        label=\"上传时间\"\r\n                        width=\"\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"company_invoice_number\"\r\n                        label=\"发票号码\"\r\n                        width=\"\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"company_supplier_name\"\r\n                        label=\"供应商/客户名称\"\r\n                        width=\"\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"price_tax_total\"\r\n                        label=\"价税合计\"\r\n                        width=\"\">\r\n                </el-table-column>\r\n            </el-table>\r\n            <div style=\"display: flex;justify-content: flex-end;margin-top: 1vh\">\r\n                <el-pagination\r\n                        @size-change=\"handleSizeChange\"\r\n                        @current-change=\"handleCurrentChange\"\r\n                        :current-page=\"page\"\r\n                        :page-sizes=\"[10, 20, 30, 40]\"\r\n                        :page-size=\"pageSize\"\r\n                        layout=\"total, sizes, prev, pager, next, jumper\"\r\n                        :total=\"total\">\r\n                </el-pagination>\r\n            </div>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"dialogVisible_ok\">确 定</el-button>\r\n             </span>\r\n        </el-dialog>\r\n        <addFaPiao v-if=\"fapiaozujian_kaiguan\" @fapiaozujian=\"fapiaozujian_kaiguan = false\"></addFaPiao>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import mix from \"@/mixins/mixins\"\r\n    import pingzheng from \"@/components/yuchunhui/add_pingzheng\"\r\n    import addFaPiao from \"@/components/yuchunhui/add_fapiao\"\r\n\r\n    export default {\r\n        name: \"xianjinliuliangbiao\",\r\n        mixins:[mix],\r\n        components:{\r\n            addFaPiao,\r\n            pingzheng\r\n        },\r\n\r\n        data() {\r\n            return {\r\n                guding_form:\"\",\r\n                // 发票组件的开关\r\n                fapiaozujian_kaiguan:false,\r\n\r\n                yaoxinxi:false,\r\n                //给孩子要反显的信息\r\n                fanxian:\"\",\r\n\r\n                // 后台要的\r\n                flag1:'',\r\n                flag2:'',\r\n\r\n                form: {\r\n                    code: '',\r\n                    date: ''\r\n                },\r\n\r\n                user:{\r\n                    tableData:[]\r\n                },\r\n\r\n                dialogVisible:false,\r\n                tableData1:[],\r\n                id:'',\r\n                page:1,\r\n                pageSize:10,\r\n                total:0\r\n            }\r\n        },\r\n        mounted(){\r\n            this.getStorage()\r\n\r\n\r\n\r\n            this._ajax('userAccounts/selectCertificateUuid',{\r\n                uuid:this.uuid,\r\n                workAccountId:this.accountId,\r\n                certificateUuid:this.$route.query.certificateUuid\r\n            }, msg => {\r\n                // 保存后台要的\r\n                this.flag1 = msg[0].flag1\r\n                this.flag2 = msg[0].flag2\r\n\r\n                this.form.code = msg[0].certificate_number\r\n                this.form.date = msg[0].creationTime\r\n\r\n\r\n\r\n                const x = []\r\n                msg.forEach((item,index)=>{\r\n                    const y = {\r\n                        zhaiyao:item.certificate_abstract,\r\n                        jie:\"\",\r\n                        dai:\"\",\r\n                        index,\r\n                        jie_show:false,\r\n                        dai_show:false\r\n                    }\r\n                    //后台返回的是 一级-二级,我只要没有一级的二级或者直接一级\r\n                    if(item.accountant_subject.includes(\"-\")){\r\n                        y.name = item.accountant_subject.split(\"-\")[1]+ ',' + item.accountant_code\r\n                    }else{\r\n                        y.name = item.accountant_subject + ',' + item.accountant_code\r\n\r\n                    }\r\n\r\n                    if(item.total_credit_money == 0){\r\n                        y.dai_show = true\r\n                        y.jie = item.total_debit_money\r\n                    }\r\n                    if(item.total_debit_money == 0){\r\n                        y.jie_show = true\r\n                        y.dai = item.total_credit_money\r\n                    }\r\n\r\n                    x.push(y)\r\n                })\r\n\r\n                this.index = msg.length -1\r\n                this.user.tableData = x\r\n                //给孩子返显的内容\r\n                this.fanxian = x\r\n                // this._message(1,\"返显成功\")\r\n            })\r\n\r\n        },\r\n        methods: {\r\n            geiguding(x){\r\n                this.guding_form = this.$store.state.gdzc\r\n                this.tiqu_ok_guding()\r\n            },\r\n            tiqu_ok_guding(){\r\n                let certificateAbstract = ''\r\n                let debitMoney = ''\r\n                let creditMoney = ''\r\n                let subject = ''\r\n                let code = ''\r\n                this.user.tableData.forEach(item=>{\r\n                    certificateAbstract += item.zhaiyao + ','\r\n                    if(item.jie == ''){\r\n                        debitMoney+= 0+','\r\n                    }else{\r\n                        debitMoney+= item.jie+','\r\n                    }\r\n\r\n                    if(item.dai == ''){\r\n                        creditMoney+= 0+','\r\n                    }else{\r\n                        creditMoney+= item.dai+','\r\n                    }\r\n\r\n                    subject += item.name.split(',')[0]+','\r\n                    code += item.name.split(',')[1]+','\r\n\r\n                })\r\n                // 如果是上传票据\r\n                if(sessionStorage.getItem(\"type1\") == \"shangchuan_fapiao\"){\r\n                    this._ajax('userAccounts/addCertificateInvoice',{\r\n                        uuid:this.uuid,\r\n                        workAccountId:this.accountId,\r\n\r\n                        debitMoney,\r\n                        creditMoney,\r\n                        subject,\r\n                        code,\r\n                        certificateAbstract,\r\n\r\n                        ...JSON.parse(sessionStorage.getItem(\"fapiao\")),\r\n\r\n                        flag1:this.flag1,\r\n                        flag2:this.flag2,\r\n\r\n                        certificateNumber:this.form.code,\r\n                        time:this.form.date,\r\n\r\n                        type1:1,\r\n                        certificateUuid:this.$route.query.certificateUuid,\r\n                        ...this.guding_form,\r\n                        type2:1\r\n                    }, msg => {\r\n\r\n                        this._message(1,\"修改成功\")\r\n                        this.clear()\r\n                        // this.$router.go(-1)\r\n                        this.$router.push('/home/pingzhengguanli/pingzhengguanli')\r\n\r\n                        // this.$router.push({path: '/home/pingzhengguanli/pingzhengguanli'})\r\n                    })\r\n                    // 如果只是修改\r\n                }else if(!sessionStorage.getItem(\"type1\")){\r\n                    this._ajax('userAccounts/updateCertificate',{\r\n                        uuid:this.uuid,\r\n                        workAccountId:this.accountId,\r\n\r\n                        debitMoney,\r\n                        creditMoney,\r\n                        subject,\r\n                        code,\r\n                        certificateAbstract,\r\n\r\n                        flag1:this.flag1,\r\n                        flag2:this.flag2,\r\n\r\n                        certificateNumber:this.form.code,\r\n                        time:this.form.date,\r\n\r\n\r\n                        certificateUuid:this.$route.query.certificateUuid,\r\n                        ...this.guding_form,\r\n                        type2:1\r\n\r\n\r\n                    }, msg => {\r\n\r\n                        this._message(1,\"修改成功\")\r\n                        // this.$router.go(-1)\r\n                        this.$router.push('/home/pingzhengguanli/pingzhengguanli')\r\n\r\n\r\n                        this.clear()\r\n                    })\r\n                    // 如果从现有发票选择\r\n                }else if(sessionStorage.getItem(\"type1\") == 'pipei_fapiao'){\r\n                    // 修改凭证\r\n                    this._ajax('userAccounts/updateCertificate',{\r\n                        uuid:this.uuid,\r\n                        workAccountId:this.accountId,\r\n\r\n                        debitMoney,\r\n                        creditMoney,\r\n                        subject,\r\n                        code,\r\n                        certificateAbstract,\r\n\r\n                        flag1:this.flag1,\r\n                        flag2:this.flag2,\r\n\r\n                        certificateNumber:this.form.code,\r\n                        time:this.form.date,\r\n\r\n                        certificateUuid:this.$route.query.certificateUuid,\r\n                        ...this.guding_form,\r\n                        type2:1\r\n\r\n                    }, msg => {\r\n\r\n                        this._message(1,\"修改成功\")\r\n                        this.$router.push('/home/pingzhengguanli/pingzhengguanli')\r\n                        this.clear()\r\n                    })\r\n                    // 关联现有匹配和发票\r\n                    this._ajax('userAccounts/updateAccountFlag',{\r\n                        uuid:this.uuid,\r\n                        workAccountId:this.accountId,\r\n\r\n                        certificateUuid:this.$route.query.uuid,\r\n                        invoiceId:this.id\r\n                    }, msg => {\r\n                        // this._message(1,\"匹配成功\")\r\n                        this.clear()\r\n                    })\r\n                }\r\n            },\r\n            // 保存\r\n            ok() {\r\n                if(isNaN(Number(this.form.code)) || Number(this.form.code) <=0){\r\n                    this._message(2,\"凭证字号格式不正确\")\r\n                    return\r\n                }\r\n                this.yaoxinxi = new Date().getTime()\r\n            },\r\n            //返回\r\n            cancel(){\r\n                this.clear()\r\n                this.$router.go(-1)\r\n            },\r\n            geixinxi(x,y){\r\n                if(y == \"guding\"){\r\n                    return\r\n                }\r\n                this.user = x\r\n                this.tiqu_ok()\r\n            },\r\n            tiqu_ok(){\r\n                let certificateAbstract = ''\r\n                let debitMoney = ''\r\n                let creditMoney = ''\r\n                let subject = ''\r\n                let code = ''\r\n                this.user.tableData.forEach(item=>{\r\n                    certificateAbstract += item.zhaiyao + ','\r\n                    if(item.jie == ''){\r\n                        debitMoney+= 0+','\r\n                    }else{\r\n                        debitMoney+= item.jie+','\r\n                    }\r\n\r\n                    if(item.dai == ''){\r\n                        creditMoney+= 0+','\r\n                    }else{\r\n                        creditMoney+= item.dai+','\r\n                    }\r\n\r\n                    subject += item.name.split(',')[0]+','\r\n                    code += item.name.split(',')[1]+','\r\n\r\n                })\r\n                // 如果是上传票据\r\n                if(sessionStorage.getItem(\"type1\") == \"shangchuan_fapiao\"){\r\n                    this._ajax('userAccounts/addCertificateInvoice',{\r\n                        uuid:this.uuid,\r\n                        workAccountId:this.accountId,\r\n\r\n                        debitMoney,\r\n                        creditMoney,\r\n                        subject,\r\n                        code,\r\n                        certificateAbstract,\r\n\r\n                        ...JSON.parse(sessionStorage.getItem(\"fapiao\")),\r\n\r\n                        flag1:this.flag1,\r\n                        flag2:this.flag2,\r\n\r\n                        certificateNumber:this.form.code,\r\n                        time:this.form.date,\r\n\r\n                        type1:1,\r\n                        certificateUuid:this.$route.query.certificateUuid,\r\n                        ...this.guding_form,\r\n                        type2:1\r\n                    }, msg => {\r\n\r\n                        this._message(1,\"修改成功\")\r\n                        this.clear()\r\n                        // this.$router.go(-1)\r\n                        this.$router.push('/home/pingzhengguanli/pingzhengguanli')\r\n\r\n                        // this.$router.push({path: '/home/pingzhengguanli/pingzhengguanli'})\r\n                    })\r\n                    // 如果只是修改\r\n                }else if(!sessionStorage.getItem(\"type1\")){\r\n                    this._ajax('userAccounts/updateCertificate',{\r\n                        uuid:this.uuid,\r\n                        workAccountId:this.accountId,\r\n\r\n                        debitMoney,\r\n                        creditMoney,\r\n                        subject,\r\n                        code,\r\n                        certificateAbstract,\r\n\r\n                        flag1:this.flag1,\r\n                        flag2:this.flag2,\r\n\r\n                        certificateNumber:this.form.code,\r\n                        time:this.form.date,\r\n\r\n\r\n                        certificateUuid:this.$route.query.certificateUuid,\r\n                        ...this.guding_form,\r\n                        type2:1\r\n\r\n                    }, msg => {\r\n\r\n                        this._message(1,\"修改成功\")\r\n                        // this.$router.go(-1)\r\n                        this.$router.push('/home/pingzhengguanli/pingzhengguanli')\r\n\r\n\r\n                        this.clear()\r\n                    })\r\n                    // 如果从现有发票选择\r\n                }else if(sessionStorage.getItem(\"type1\") == 'pipei_fapiao'){\r\n                    // 修改凭证\r\n                    this._ajax('userAccounts/updateCertificate',{\r\n                        uuid:this.uuid,\r\n                        workAccountId:this.accountId,\r\n\r\n                        debitMoney,\r\n                        creditMoney,\r\n                        subject,\r\n                        code,\r\n                        certificateAbstract,\r\n\r\n                        flag1:this.flag1,\r\n                        flag2:this.flag2,\r\n\r\n                        certificateNumber:this.form.code,\r\n                        time:this.form.date,\r\n\r\n                        certificateUuid:this.$route.query.certificateUuid,\r\n                        ...this.guding_form,\r\n                        type2:1\r\n                    }, msg => {\r\n\r\n                        this._message(1,\"修改成功\")\r\n                        this.$router.push('/home/pingzhengguanli/pingzhengguanli')\r\n                        this.clear()\r\n                    })\r\n                    // 关联匹配的发票和凭证\r\n                    this._ajax('userAccounts/updateAccountFlag',{\r\n                        uuid:this.uuid,\r\n                        workAccountId:this.accountId,\r\n\r\n                        certificateUuid:this.$route.query.uuid,\r\n                        invoiceId:this.id\r\n                    }, msg => {\r\n                        // this._message(1,\"匹配成功\")\r\n                        this.clear()\r\n                    })\r\n                }\r\n            },\r\n            // 清除type1和fapiao\r\n            clear(){\r\n                sessionStorage.removeItem(\"type1\")\r\n                sessionStorage.removeItem(\"fapiao\")\r\n            },\r\n            // 因为更换日期时凭证字号可能会跟着变\r\n            pingzhengzihao(){\r\n                this._ajax('userHomePage/selectCertificateNumber',{\r\n                    uuid:this.uuid,\r\n                    workAccountId:this.accountId,\r\n                    time:this.form.date,\r\n                }, msg => {\r\n                    this.form.code = msg.number\r\n                    // this._message(1,\"凭证字号成功\")\r\n                })\r\n            },\r\n\r\n            // 从现有票据选择\r\n            congxianyoupiaojuxuanze(){\r\n                this.list_bind()\r\n            },\r\n            list_bind(){\r\n                this._ajax('userAccounts/selectNoInvoice',{\r\n                    uuid:this.uuid,\r\n                    workAccountId:this.accountId,\r\n                    page:this.page,\r\n                    pageSize:this.pageSize\r\n                }, msg => {\r\n                    this.tableData1 = msg.PageInfo.list\r\n                    this.total = msg.PageInfo.total\r\n\r\n                    this.dialogVisible = true\r\n                    // this._message(1,\"票据成功\")\r\n                })\r\n            },\r\n            handleSizeChange(val) {\r\n                console.log(`每页 ${val} 条`);\r\n                this.pageSize = val\r\n                this.list_bind()\r\n            },\r\n            handleCurrentChange(val) {\r\n                console.log(`当前页: ${val}`);\r\n                this.dangqianye = val\r\n                this.list_bind()\r\n            },\r\n            // 对话框的确定\r\n            dialogVisible_ok(){\r\n                if(this.id == 0){\r\n                    this._message(2,\"请选择一个\")\r\n                    return\r\n                }\r\n                sessionStorage.setItem(\"fapiao\",JSON.stringify(this.id))\r\n                sessionStorage.setItem(\"type1\",\"pipei_fapiao\")\r\n                this.dialogVisible = false\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .el-table .lan {\r\n        background: rgba(68, 160, 255, 0.05);\r\n    }\r\n\r\n    .has-gutter {\r\n        background: red !important;\r\n    }\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/pingzhengguanli/editor_pingzheng.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"background\":\"#FFF\",\"padding\":\"2vh 2vw\"}},[_c('div',{staticStyle:{\"font-size\":\"30px\",\"color\":\"#1C2023\",\"text-align\":\"center\"}},[_vm._v(\"修改凭证\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"border\":\"1px solid #F8F8FF\",\"padding\":\"2vw\",\"margin-top\":\"2vh\"}},[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-between\",\"align-items\":\"flex-start\"}},[_c('div',[_c('el-form',{staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"凭证字号：\"}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.form.code),callback:function ($$v) {_vm.$set(_vm.form, \"code\", $$v)},expression:\"form.code\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"号\"}}),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"日期：\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"\",\"value-format\":\"yyyy-MM-dd\"},on:{\"change\":_vm.pingzhengzihao},model:{value:(_vm.form.date),callback:function ($$v) {_vm.$set(_vm.form, \"date\", $$v)},expression:\"form.date\"}})],1)],1)],1),_vm._v(\" \"),_c('div',[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){_vm.fapiaozujian_kaiguan=true}}},[_vm._v(\"上传票据\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":_vm.congxianyoupiaojuxuanze}},[_vm._v(\"从现有票据选择\")])],1)]),_vm._v(\" \"),_c('pingzheng',{attrs:{\"yaoxinxi\":_vm.yaoxinxi,\"fanxian\":_vm.fanxian,\"type\":\"editor_pingzheng\"},on:{\"geixinxi\":_vm.geixinxi,\"geiguding\":_vm.geiguding}}),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\",\"margin-top\":\"5vh\"}},[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){return _vm.ok()}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"5vw\"},attrs:{\"type\":\"info\"},on:{\"click\":_vm.cancel}},[_vm._v(\"返回\")])],1)],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"\",\"visible\":_vm.dialogVisible,\"close-on-press-escape\":false,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-table',{attrs:{\"data\":_vm.tableData1}},[_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"单选\",\"width\":\"60\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-radio',{attrs:{\"label\":scope.row.id},model:{value:(_vm.id),callback:function ($$v) {_vm.id=$$v},expression:\"id\"}},[_vm._v(\" \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"creation_time\",\"label\":\"上传时间\",\"width\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"company_invoice_number\",\"label\":\"发票号码\",\"width\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"company_supplier_name\",\"label\":\"供应商/客户名称\",\"width\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"price_tax_total\",\"label\":\"价税合计\",\"width\":\"\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"flex-end\",\"margin-top\":\"1vh\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.page,\"page-sizes\":[10, 20, 30, 40],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.dialogVisible_ok}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),(_vm.fapiaozujian_kaiguan)?_c('addFaPiao',{on:{\"fapiaozujian\":function($event){_vm.fapiaozujian_kaiguan = false}}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-c401c2ea\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/pingzhengguanli/editor_pingzheng.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c401c2ea\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./editor_pingzheng.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./editor_pingzheng.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./editor_pingzheng.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c401c2ea\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./editor_pingzheng.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/pingzhengguanli/editor_pingzheng.vue\n// module id = null\n// module chunks = ","<template>\n    <div>\n        <el-dialog\n                :show-close=\"false\"\n                :close-on-click-modal=\"false\"\n                :close-on-press-escape=\"false\"\n                title=\"提示\"\n                :visible.sync=\"dialogVisible\"\n                width=\"60%\">\n            <div style=\"margin-bottom: 30px\">\n                <el-upload :on-change=\"change\" action=\"\" :show-file-list=\"false\" :auto-upload=\"false\">\n                    <el-button type=\"warning\">点击上传</el-button>\n                </el-upload>\n            </div>\n            <span>\n                <el-form ref=\"form\" :model=\"form\" label-width=\"145px\" :rules=\"rules\">\n                    <div style=\"display: flex;flex-wrap: wrap\">\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"发票类型：\" prop=\"invoiceType\">\n                                <el-select v-model=\"form.invoiceType\" placeholder=\"请选择\" style=\"width: 100%;\">\n                                    <el-option label=\"专票\" value=\"0\"></el-option>\n                                    <el-option label=\"普票\" value=\"1\"></el-option>\n                                </el-select>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"开票日期：\" prop=\"invoicingDate\">\n                                <el-date-picker style=\"width: 100%;\" type=\"date\" placeholder=\"\" v-model=\"form.invoicingDate\" value-format=\"yyyy-MM-dd\"></el-date-picker>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"认证日期：\">\n                                <el-date-picker style=\"width: 100%;\" type=\"date\" placeholder=\"\" v-model=\"form.authenticationDate\" value-format=\"yyyy-MM-dd\"></el-date-picker>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"发票号码：\" prop=\"invoiceNumber\">\n                                <el-input v-model=\"form.invoiceNumber\" style=\"width: 100%;\"></el-input>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"供应商/客户类型：\" prop=\"supplierType\">\n                                <el-select v-model=\"form.supplierType\" placeholder=\"请选择\" style=\"width: 100%;\">\n                                    <el-option label=\"供应商\" value=\"供应商\"></el-option>\n                                    <el-option label=\"客户\" value=\"客户\"></el-option>\n                                </el-select>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-col :span=\"19\">\n                                <el-form-item label=\"供应商/客户名称：\" prop=\"supplierName\">\n                                <el-select v-model=\"form.supplierName\" placeholder=\"请选择\" style=\"width: 100%;\">\n                                    <el-option v-for=\"item in list\" :key=\"item.company_supplier_name\" :label=\"item.company_supplier_name\" :value=\"item.company_supplier_name\"></el-option>\n                                </el-select>\n                                </el-form-item>\n                            </el-col>\n                            <el-col :span=\"3\" :offset=\"1\">\n                                <el-button @click=\"show_huoban=true\" type=\"\" icon=\"el-icon-plus\"></el-button>\n                            </el-col>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"金额：\" prop=\"money\">\n                                <el-input v-model=\"form.money\" style=\"width: 100%;\"></el-input>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-form-item label=\"税率：\" prop=\"taxRate\">\n                                <el-input v-model=\"form.taxRate\" style=\"width: 100%;\"></el-input>\n                            </el-form-item>\n                        </div>\n                        <div style=\"width: 350px;\">\n                            <el-col :span=\"21\">\n                                <el-form-item label=\"价税合计：\" prop=\"priceTaxTotal\">\n                                <el-input v-model=\"form.priceTaxTotal\" style=\"width: 100%;\"></el-input>\n                                </el-form-item>\n                            </el-col>\n                            <el-col :span=\"3\">\n                                <el-form-item label=\"元\" label-width=\"100%\">\n                                </el-form-item>\n                            </el-col>\n                        </div>\n                    </div>\n                </el-form>\n            </span>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"$emit('fapiaozujian')\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"submitForm('form')\">确 定</el-button>\n            </span>\n        </el-dialog>\n\n        <addHuoBan v-if=\"show_huoban\" @add_huoban_ok = \"show_huoban_ok_cancel\"></addHuoBan>\n\n    </div>\n</template>\n\n<script>\n    import mix from \"@/mixins/mixins\"\n    import OSS from 'ali-oss'\n    import addHuoBan from \"@/components/yuchunhui/add_yewuhuoban\"\n\n\n\n    export default {\n        name: \"add_yewuhuoban\",\n        mixins:[mix],\n        components:{\n            addHuoBan\n        },\n\n        mounted(){\n            this.getStorage()\n            this._ajax('userAccounts/selectCompanySupplierName',{\n                company_supplier_name:'',\n                uuid:this.uuid,\n                workAccountId:this.accountId,\n            }, msg => {\n                this.list = msg\n            })\n        },\n        data(){\n            return {\n                // 控制供应商客户组件的展示\n                show_huoban:false,\n                // 控制自己的开关要一直开着\n                dialogVisible:true,\n                // 先赋值给这个再赋值给form的这个\n                invoicePhoto1:\"\",\n                // 供应商客户列表\n                list:[],\n                form:{\n                    // 发票类型\n                    invoiceType:'',\n                    // 开票日期\n                    invoicingDate:'',\n                    // 认证日期\n                    authenticationDate:'',\n                    // 发票号码\n                    invoiceNumber:'',\n                    // 供应商或客户\n                    supplierType:\"\",\n                    // 供应商或客户的名字\n                    supplierName:'',\n                    // 金额\n                    money:'',\n                    // 税率\n                    taxRate:'',\n                    // 价税合计\n                    priceTaxTotal:'',\n                    // 图片\n                    invoicePhoto:\"\"\n                },\n                rules: {\n                    invoiceType: [\n                        { required: true, message: '请选择发票类型', trigger: 'change' },\n                    ],\n                    invoicingDate: [\n                        { required: true, message: '请选择开票日期', trigger: 'change' }\n                    ],\n                    invoiceNumber:[\n                        { required: true, message: '请输入发票号码', trigger: 'blur' }\n                    ],\n                    supplierType:[\n                        { required: true, message: '请选择供应商或客户', trigger: 'change' }\n                    ],\n                    supplierName:[\n                        { required: true, message: '请选择', trigger: 'change' }\n                    ],\n                    supplierType:[\n                        { required: true, message: '请选择供应商或客户', trigger: 'change' }\n                    ],\n                    money:[\n                        { required: true, message: '请输入金额', trigger: 'blur' }\n                    ],\n                    taxRate:[\n                        { required: true, message: '请输入税率', trigger: 'blur' }\n                    ],\n                    priceTaxTotal:[\n                        { required: true, message: '请选择价税合计', trigger: 'blur' }\n                    ],\n                },\n            }\n        },\n        methods:{\n            // 组件的保存和取消\n            show_huoban_ok_cancel(x){\n                if(x == 1){\n                    this._ajax('userAccounts/selectCompanySupplierName',{\n                        company_supplier_name:'',\n                        uuid:this.uuid,\n                        workAccountId:this.accountId,\n                    }, msg => {\n                        this.list = msg\n                        this.show_huoban = false\n                    })\n                }else{\n                    this.show_huoban = false\n                }\n            },\n\n            submitForm(formName) {\n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                        sessionStorage.setItem(\"fapiao\",JSON.stringify(this.form))\n                        sessionStorage.setItem(\"type1\",\"shangchuan_fapiao\")\n                        this.$emit(\"fapiaozujian\")\n                    } else {\n                        console.log('error submit!!');\n                        return false;\n                    }\n                });\n            },\n            change (file) {\n                var message = this.$message({\n                    type:\"warning\",\n                    message:'发票识别中请稍后',\n                    duration:0\n                })\n\n                var reader = new FileReader()\n                reader.readAsDataURL(file.raw);\n                reader.onload = () =>{\n                    this._ajax('common/invoice',{\n                        encode:JSON.stringify(reader.result.split(\",\")[1])\n                    }, msg => {\n                        message.close()\n                        if(Object.prototype.toString.call(msg) == '[object Object]'){\n                            if(msg.hasOwnProperty('state')){\n                                return\n                            }\n                        }\n                        this._message(1,\"识别成功\")\n                        // 临时存储图片识别成功之后再显示\n                        this.form.invoicePhoto = this.invoicePhoto1\n\n                        //发票号码\n                        this.form.invoiceNumber = msg.number\n                        //价税合计\n                        this.form.priceTaxTotal = msg.total\n                        // 金额\n                        this.form.money = msg.pretax_amount\n                        // 税率\n                        this.form.taxRate = (((msg.tax/msg.pretax_amount).toFixed(2))*100)+ '%'\n\n                        let x = \"\"\n                        msg.date.split(\"\").forEach((item,index)=>{\n                            if(item == \"年\" || item == \"月\" || item ==\"日\"){\n                                if(index != (msg.date.split(\"\").length)-1){\n                                    x+=\"-\"\n                                }\n                            }else{\n                                x+=item\n                            }\n                        })\n                        //开票日期\n                        this.form.invoicingDate = x\n                    })\n                }\n\n\n                var _this = this;\n                if (file == undefined) {\n                    return false;\n                }\n\n                var fName = file.name,\n                    suffix = fName.substr(fName.lastIndexOf(\".\")),\n                    nda = 'user-herder' + Date.parse(new Date()) / 1000,\n                    storeAs = nda + suffix;\n\n                var client = new OSS.Wrapper(this.$ali);\n                client.multipartUpload(storeAs, file.raw).then(function (result) {\n                    _this.invoicePhoto1 = result.res.requestUrls[0].split('?')[0];\n                }).catch(function (err) {\n                    _this.$message({\n                        message: '服务器繁忙，请稍后再试',\n                        type: 'error'\n                    });\n                });\n            },\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/yuchunhui/add_fapiao.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-dialog',{attrs:{\"show-close\":false,\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"title\":\"提示\",\"visible\":_vm.dialogVisible,\"width\":\"60%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticStyle:{\"margin-bottom\":\"30px\"}},[_c('el-upload',{attrs:{\"on-change\":_vm.change,\"action\":\"\",\"show-file-list\":false,\"auto-upload\":false}},[_c('el-button',{attrs:{\"type\":\"warning\"}},[_vm._v(\"点击上传\")])],1)],1),_vm._v(\" \"),_c('span',[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"145px\",\"rules\":_vm.rules}},[_c('div',{staticStyle:{\"display\":\"flex\",\"flex-wrap\":\"wrap\"}},[_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"发票类型：\",\"prop\":\"invoiceType\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.invoiceType),callback:function ($$v) {_vm.$set(_vm.form, \"invoiceType\", $$v)},expression:\"form.invoiceType\"}},[_c('el-option',{attrs:{\"label\":\"专票\",\"value\":\"0\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"普票\",\"value\":\"1\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"开票日期：\",\"prop\":\"invoicingDate\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"placeholder\":\"\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.form.invoicingDate),callback:function ($$v) {_vm.$set(_vm.form, \"invoicingDate\", $$v)},expression:\"form.invoicingDate\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"认证日期：\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"placeholder\":\"\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.form.authenticationDate),callback:function ($$v) {_vm.$set(_vm.form, \"authenticationDate\", $$v)},expression:\"form.authenticationDate\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"发票号码：\",\"prop\":\"invoiceNumber\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.form.invoiceNumber),callback:function ($$v) {_vm.$set(_vm.form, \"invoiceNumber\", $$v)},expression:\"form.invoiceNumber\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"供应商/客户类型：\",\"prop\":\"supplierType\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.supplierType),callback:function ($$v) {_vm.$set(_vm.form, \"supplierType\", $$v)},expression:\"form.supplierType\"}},[_c('el-option',{attrs:{\"label\":\"供应商\",\"value\":\"供应商\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"客户\",\"value\":\"客户\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-col',{attrs:{\"span\":19}},[_c('el-form-item',{attrs:{\"label\":\"供应商/客户名称：\",\"prop\":\"supplierName\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.supplierName),callback:function ($$v) {_vm.$set(_vm.form, \"supplierName\", $$v)},expression:\"form.supplierName\"}},_vm._l((_vm.list),function(item){return _c('el-option',{key:item.company_supplier_name,attrs:{\"label\":item.company_supplier_name,\"value\":item.company_supplier_name}})}),1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3,\"offset\":1}},[_c('el-button',{attrs:{\"type\":\"\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){_vm.show_huoban=true}}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"金额：\",\"prop\":\"money\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.form.money),callback:function ($$v) {_vm.$set(_vm.form, \"money\", $$v)},expression:\"form.money\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-form-item',{attrs:{\"label\":\"税率：\",\"prop\":\"taxRate\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.form.taxRate),callback:function ($$v) {_vm.$set(_vm.form, \"taxRate\", $$v)},expression:\"form.taxRate\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"350px\"}},[_c('el-col',{attrs:{\"span\":21}},[_c('el-form-item',{attrs:{\"label\":\"价税合计：\",\"prop\":\"priceTaxTotal\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.form.priceTaxTotal),callback:function ($$v) {_vm.$set(_vm.form, \"priceTaxTotal\", $$v)},expression:\"form.priceTaxTotal\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-form-item',{attrs:{\"label\":\"元\",\"label-width\":\"100%\"}})],1)],1)])])],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){return _vm.$emit('fapiaozujian')}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('form')}}},[_vm._v(\"确 定\")])],1)]),_vm._v(\" \"),(_vm.show_huoban)?_c('addHuoBan',{on:{\"add_huoban_ok\":_vm.show_huoban_ok_cancel}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-23e3ecc8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/yuchunhui/add_fapiao.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-23e3ecc8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./add_fapiao.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./add_fapiao.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./add_fapiao.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-23e3ecc8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./add_fapiao.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-23e3ecc8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/yuchunhui/add_fapiao.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}