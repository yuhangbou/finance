webpackJsonp([41],{"35TG":function(t,e){},Mdbk:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("lC5x"),i=a.n(n),o=a("ZLEe"),c=a.n(o),r=a("rVsN"),l=a.n(r),s=a("J0Oq"),u=a.n(s),d={name:"xianjinliuliangbiao",mixins:[a("IfhF").a],mounted:function(){var t=this;this.getStorage(),this._ajax("userHomePage/selectChange",{uuid:this.uuid,workAccountId:this.accountId,timeMonth:this.date},function(e){if(0==e.length)return t.tableData=[],t.kemu=[],void(t.name="");t.name=e[0].accountant_code;var a=[];e.forEach(function(t){t.c=[],t.show=t.accountant_code+""+t.accountant_subject,4==t.accountant_code.length&&a.push(t)}),function t(a){a.forEach(function(a){e.forEach(function(t){a.accountant_code===t.accountant_code.split("").reverse().join("").substr(2).split("").reverse().join("")&&a.c.push(t)}),t(a.c)})}(a),t.kemu=a,t.$nextTick(function(){t.$refs.treeBox.setCurrentKey(a[0].show)}),t.list()})},data:function(){return{defaultProps:{children:"c",label:"show"},pickerOptions:{disabledDate:function(t){return t.getTime()<new Date(JSON.parse(localStorage.getItem("start_date")))-864e5}},kemu:[],date:(new Date).getFullYear()+"-"+(Array(2).join(0)+(Number((new Date).getMonth())+1)).slice(-2),tableData:[],total:0,dangqianye:1,pageSize:10,name:""}},methods:{daochu:function(){var t,e,a=(t=u()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new l.a(function(t,a){n._ajax("zip/zipDetailsAccount",{uuid:n.uuid,workId:n.accountId,time:n.date,num:n.name},function(n){if(0==c()(n[0]).length)a();else{var i=document.createElement("a");"csv"==e?i.setAttribute("href","http://"+n[0].csv):i.setAttribute("href","http://"+n[0].zip),document.body.appendChild(i),i.click(),document.body.removeChild(i),t()}})}));case 1:case"end":return t.stop()}},t,this)})),function(e){return t.apply(this,arguments)}),n=this;(e=u()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a("csv");case 2:a("zip");case 3:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})()},change_kemu:function(t){this.dangqianye=1,this.name=t.accountant_code,this.list()},change_date:function(){var t=this;this.tableData=[],this.total=0,this.dangqianye=1,this._ajax("userHomePage/selectChange",{uuid:this.uuid,workAccountId:this.accountId,timeMonth:this.date},function(e){if(0==e.length)return t.tableData=[],t.kemu=[],void(t.name="");t.name=e[0].accountant_code;var a=[];e.forEach(function(t){t.c=[],t.show=t.accountant_code+""+t.accountant_subject,4==t.accountant_code.length&&a.push(t)}),console.log(a),function t(a){a.forEach(function(a){e.forEach(function(t){a.accountant_code===t.accountant_code.split("").reverse().join("").substr(2).split("").reverse().join("")&&a.c.push(t)}),t(a.c)})}(a),t.kemu=a,t.$nextTick(function(){t.$refs.treeBox.setCurrentKey(a[0].show)}),t.list()})},handleSizeChange:function(t){console.log("每页 "+t+" 条"),0!=this.kemu.length&&(this.pageSize=t,this.list())},handleCurrentChange:function(t){console.log("当前页: "+t),this.dangqianye=t,this.list()},list:function(){var t=this;console.log(this.dangqianye),this.tableData=[],this._ajax("common/selectDetailsAccount1",{uuid:this.uuid,workAccountId:this.accountId,page:this.dangqianye-1,pageSize:this.pageSize,timeMonth:this.date,subjectNum:this.name},function(e){try{t.total=e[0]["当期分页规则"][e[0]["当期分页规则"].length-1]}catch(t){return}e=e[0].data,t.tableData=e})},tableRowClassName:function(t){t.row;return t.rowIndex%2!=0?"lan":""}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{background:"#FFF",padding:"2vh 2vw","margin-bottom":"10vh"}},[a("div",{staticStyle:{"font-size":"30px",color:"#1C2023","text-align":"center"}},[t._v("明细账")]),t._v(" "),a("div",{staticStyle:{border:"1px solid #F8F8FF",padding:"2vh 2vw","margin-top":"2vh"}},[a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-button",{attrs:{type:"warning"},on:{click:t.daochu}},[t._v("导出")]),t._v(" "),a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{"picker-options":t.pickerOptions,"value-format":"yyyy-MM",type:"month",placeholder:"选择月"},on:{change:t.change_date},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),a("div",{staticStyle:{display:"flex","margin-top":"2vh"}},[a("div",{staticStyle:{flex:"6"},attrs:{id:"id"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"accountant_code",label:"凭证字号",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[(e.row.type,a("span",[t._v(t._s(e.row.certificateNumber))]))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"certificateTime",label:"生成时间",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"accountantCode",label:"科目"}}),t._v(" "),a("el-table-column",{attrs:{prop:"certificateAbstract",label:"摘要"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalDebitMoney",label:"借方金额",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalCreditMoney",label:"贷方金额",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"方向"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.flag?a("span",[t._v("借")]):1==e.row.flag?a("span",[t._v("贷")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"balanceMoney",label:"余额"}})],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"1vh"}},[a("el-pagination",{attrs:{"current-page":t.dangqianye,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("div",{staticStyle:{flex:"2","margin-left":"1vw",overflow:"auto",height:"500px",border:"1px solid #CCC"}},[a("el-tree",{ref:"treeBox",attrs:{data:t.kemu,props:t.defaultProps,"node-key":"show","expand-on-click-node":!1,"highlight-current":!0},on:{"node-click":t.change_kemu}})],1)])])])])},staticRenderFns:[]};var p=a("C7Lr")(d,h,!1,function(t){a("35TG")},null,null);e.default=p.exports}});
//# sourceMappingURL=41.cb826aa0f12a89fe40a6.js.map