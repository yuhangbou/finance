webpackJsonp([15],{G0NC:function(e,t){},GK7d:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("IfhF"),n=a("7yAV"),r=a.n(n),i={name:"xianjinliuliangbiao",mixins:[s.a],inject:["shuaxin_company"],data:function(){return{shengList:[],shiList:[],xianList:[],sheng:"",shi:"",xian:"",list:[],user:{user_name:"",work_city:"",work_address:"",company_tax_type:"",work_type:"",accounting_standards:"",work_head_photo:"",job:"",work_account_name:"",work_account_nickname:"",enable_time:""},rules:{work_account_name:[{required:!0,message:"请输入账套名称",trigger:"blur"}],user_name:[{required:!0,message:"请输入公司名称",trigger:"blur"}],company_tax_type:[{required:!0,message:"请选择增值税种类",trigger:"change"}],enable_time:[{required:!0,message:"请选择账套启用日期",trigger:"change"}],work_type:[{required:!0,message:"请选择行业",trigger:"change"}],work_address:[{required:!0,message:"请输入详细地址",trigger:"blue"}],accounting_standards:[{required:!0,message:"请选择会计准则",trigger:"change"}]}}},mounted:function(){var e=this;this.getStorage(),this._ajax("weChatLogin/jobList",{},function(t){e.list=t[0].name.split(",")}),this._ajax("userLogin/province",{workAccountId:this.accountId,uuid:this.uuid},function(t){e.shengList=t,e._ajax("userCompany/selectAccountCompany",{uuid:e.uuid,id:e.accountId},function(t){e.user=t;var a=t.work_city.split(",");e.sheng=a[0],e.shi=a[1],e.xian=a[2];var s=e.shengList.find(function(t){return t.name==e.sheng});e._ajax("userLogin/city",{workAccountId:e.accountId,uuid:e.uuid,id:s.id},function(t){e.shiList=t;var a=e.shiList.find(function(t){return t.name==e.shi});e._ajax("userLogin/area",{workAccountId:e.accountId,uuid:e.uuid,id:a.id},function(t){e.xianList=t})})})})},methods:{change_sheng:function(e){var t=this;this.sheng=e.name,this.shi="",this.xian="",this._ajax("userLogin/city",{workAccountId:this.accountId,uuid:this.uuid,id:e.id},function(e){t.shiList=e})},change_shi:function(e){var t=this;this.shi=e.name,this.xian="",this._ajax("userLogin/area",{workAccountId:this.accountId,uuid:this.uuid,id:e.id},function(e){t.xianList=e})},change_xian:function(e){this.xian=e.name},data_init:function(){this.user.user_name="",this.user.work_city="",this.user.work_address="",this.user.company_tax_type="",this.user.work_type="",this.user.accounting_standards="",this.user.work_head_photo="",this.user.job="",this.user.work_account_name="",this.user.work_account_nickname="",this.sheng="",this.shi="",this.xian=""},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.selected(),t._ajax("userCompany/updateCompany",{uuid:t.uuid,accountId:t.accountId,userName:t.user.user_name,workCity:t.user.work_city,workAddress:t.user.work_address,taxType:t.user.company_tax_type,accountingStandards:t.user.accounting_standards,headPhoto:t.user.work_head_photo,job:t.user.job,accountName:t.user.work_account_name,accountNickName:t.user.work_account_nickname,workType:t.user.work_type},function(e){t._message(1,"修改成功"),t.shuaxin_company()})})},change:function(e){var t=this;if(void 0==e)return!1;var a=e.name,s=a.substr(a.lastIndexOf(".")),n="user-herder"+Date.parse(new Date)/1e3+s;new r.a.Wrapper(this.$ali).multipartUpload(n,e.raw).then(function(e){t.user.work_head_photo=e.res.requestUrls[0].split("?")[0],t.$message({message:"上传成功",type:"success"})}).catch(function(e){console.log(e),t.$message({message:"服务器繁忙，请稍后再试",type:"error"})})},selected:function(){this.user.work_city=this.sheng+","+this.shi+","+this.xian}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{background:"#FFF",padding:"2vh 2vw"}},[a("div",{staticStyle:{"font-size":"30px",color:"#1C2023","text-align":"center"}},[e._v("基本信息管理")]),e._v(" "),a("div",{staticStyle:{border:"1px solid #F8F8FF",padding:"2vh 2vw","margin-top":"2vh"}},[a("div",[a("el-form",{ref:"user",attrs:{"label-width":"170px",model:e.user,rules:e.rules}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"5vh"}},[a("div",{staticStyle:{flex:"6"}},[a("div",{staticStyle:{"margin-bottom":"3vh"}},[a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$router.push({path:"/home/zhangtao/zhanghushezhi"})}}},[e._v("账户设置")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$router.push({path:"/home/zhangtao/qichushezhi"})}}},[e._v("期初设置")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$router.push({path:"/home/zhangtao/kemushezhi"})}}},[e._v("科目设置")])],1),e._v(" "),a("el-form-item",{attrs:{label:"公司名称：",prop:"user_name"}},[a("el-input",{staticClass:"hj-ipt",attrs:{type:"text",placeholder:"请输入公司名称"},model:{value:e.user.user_name,callback:function(t){e.$set(e.user,"user_name",t)},expression:"user.user_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所在城市："}},[a("el-col",{attrs:{span:7}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择省"},on:{change:e.change_sheng},model:{value:e.sheng,callback:function(t){e.sheng=t},expression:"sheng"}},e._l(e.shengList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:7,offset:1}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请先选择省"},on:{change:e.change_shi},model:{value:e.shi,callback:function(t){e.shi=t},expression:"shi"}},e._l(e.shiList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:8,offset:1}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请先选择市"},on:{change:e.change_xian},model:{value:e.xian,callback:function(t){e.xian=t},expression:"xian"}},e._l(e.xianList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"增值税种类：",prop:"company_tax_type"}},[a("el-radio-group",{model:{value:e.user.company_tax_type,callback:function(t){e.$set(e.user,"company_tax_type",t)},expression:"user.company_tax_type"}},[a("el-radio",{attrs:{label:"0"}},[e._v("小规模纳税人")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("一般纳税人")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"您的职务："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.user.job,callback:function(t){e.$set(e.user,"job",t)},expression:"user.job"}},[a("el-option",{attrs:{label:"上层部门（董事长、总经理、总经理秘书）",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"财务部门（财务总监（主管）、会计（总账会计、成本会计、往来会计）、出纳",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"人事部门（人事经理（主管）、人事助理（文员）",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"其他部门",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"请为本账套命名(可选)："}},[a("el-input",{attrs:{type:"text",placeholder:"默认公司名称"},model:{value:e.user.work_account_name,callback:function(t){e.$set(e.user,"work_account_name",t)},expression:"user.work_account_name"}})],1)],1),e._v(" "),a("div",{staticStyle:{flex:"5"}},[a("div",{staticStyle:{"margin-bottom":"3vh","text-align":"right"}},[a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$router.push({path:"/home/zhangtao/add_zhangtao"})}}},[e._v("新建账套")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.data_init}},[e._v("数据初始化")])],1),e._v(" "),a("el-form-item",{attrs:{label:"行业：",prop:"work_type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.user.work_type,callback:function(t){e.$set(e.user,"work_type",t)},expression:"user.work_type"}},e._l(e.list,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址：",prop:"work_address"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入详细地址"},model:{value:e.user.work_address,callback:function(t){e.$set(e.user,"work_address",t)},expression:"user.work_address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"会计准则：",prop:"accounting_standards"}},[a("el-radio-group",{model:{value:e.user.accounting_standards,callback:function(t){e.$set(e.user,"accounting_standards",t)},expression:"user.accounting_standards"}},[a("el-radio",{attrs:{label:"0"}},[e._v("小企业会计准则")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("企业会计准则")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"头像："}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"auto-upload":!1,action:"#","show-file-list":!1,"on-change":e.change}},[e.user.work_head_photo?a("img",{staticClass:"avatar",attrs:{src:e.user.work_head_photo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)]),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("el-form-item",[a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.submitForm("user")}}},[e._v("保存")])],1)],1)])],1)])])])},staticRenderFns:[]};var u=a("C7Lr")(i,o,!1,function(e){a("G0NC")},null,null);t.default=u.exports}});
//# sourceMappingURL=15.7a5a67d21768b73f323a.js.map